
> react-native-dl-scan@0.1.0 test
> jest --verbose --coverage

watchman warning:  Recrawled this watch 51 times, most recently because:
MustScanSubDirs UserDroppedTo resolve, please review the information on
https://facebook.github.io/watchman/docs/troubleshooting.html#recrawl
To clear this warning, run:
`watchman watch-del '/Users/shan/dev/iotashan/react-native-dl-scan' ; watchman watch-project '/Users/shan/dev/iotashan/react-native-dl-scan'`

FAIL src/frameProcessors/__tests__/qualityMetrics.test.ts
  qualityMetrics
    calculateQualityMetrics
      ✓ should return valid quality metrics structure (4 ms)
      ✓ should return values in expected ranges
      ✓ should set readyToScan to false when no document detected (1 ms)
    convertLegacyMetrics
      ✓ should convert legacy metrics to new format
      ✕ should handle poor quality legacy metrics (2 ms)
      ✕ should estimate uniformity from brightness (1 ms)
      ✓ should set document detected based on positioning
      ✓ should determine distance based on positioning value
    shouldAnalyzeFrame
      ✓ should return true for frame 0
      ✓ should return true for every 3rd frame at 10fps target
      ✓ should handle different target FPS
      ✓ should use default 10fps when no target specified (2 ms)
    Quality metrics caching
      ✓ should cache and retrieve quality metrics
      ✓ should return null for non-existent cache entries
      ✓ should return null for expired cache entries (3 ms)
      ✓ should limit cache size (1 ms)

  ● qualityMetrics › convertLegacyMetrics › should handle poor quality legacy metrics

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "poor"

      116 |       expect(converted.blur.status).toBe('poor');
      117 |       expect(converted.lighting.status).toBe('poor');
    > 118 |       expect(converted.positioning.status).toBe('warning');
          |                                            ^
      119 |       expect(converted.overall.readyToScan).toBe(false);
      120 |     });
      121 |

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:118:44)

  ● qualityMetrics › convertLegacyMetrics › should estimate uniformity from brightness

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.72
    Received: 0.7200000000000001

      131 |
      132 |       // Uniformity should be estimated as brightness * 0.9
    > 133 |       expect(converted.lighting.uniformity).toBe(0.72);
          |                                             ^
      134 |     });
      135 |
      136 |     it('should set document detected based on positioning', () => {

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:133:45)

FAIL src/__tests__/frame-processor-integration.test.ts
  Frame Processor Integration Tests
    PDF417 Barcode Detection
      ✓ should detect PDF417 barcode in high-quality frame (4 ms)
      ✓ should handle low-quality frame with reduced confidence
      ✓ should return no detection for frame without barcode (1 ms)
    Frame Quality Assessment
      ✓ should assess frame quality before processing
      ✓ should handle corrupted frame gracefully
    Performance Requirements
      ✓ should process frames within 500ms for 2 FPS requirement
      ✓ should handle rapid frame processing without memory leaks (2 ms)
    Error Handling
      ✓ should handle frame processor plugin initialization failure (8 ms)
      ✕ should handle native processing errors gracefully (1 ms)
      ✕ should handle invalid frame properties (1 ms)
    Frame Processor Configuration
      ✕ should pass frame data to native processor correctly
      ✕ should pass frame metadata to native processor
    Multi-Frame Processing
      ✕ should handle sequential frame processing (1 ms)
      ✓ should maintain consistent performance across multiple frames (15 ms)

  ● Frame Processor Integration Tests › Error Handling › should handle native processing errors gracefully

    expect(received).toThrow(expected)

    Expected substring: "Native processing error"

    Received function did not throw

      337 |
      338 |       // Act & Assert
    > 339 |       expect(() => scanLicenseFrame(mockFrame)).toThrow(
          |                                                 ^
      340 |         'Native processing error'
      341 |       );
      342 |     });

      at Object.toThrow (src/__tests__/frame-processor-integration.test.ts:339:49)

  ● Frame Processor Integration Tests › Error Handling › should handle invalid frame properties

    expect(received).toBeNull()

    Received: {"data": {"firstName": "RAPID", "lastName": "TEST"}, "processingTime": 50, "success": true}

      357 |
      358 |       // Assert - Frame processor should handle invalid frames gracefully
    > 359 |       expect(result).toBeNull();
          |                      ^
      360 |     });
      361 |   });
      362 |

      at Object.toBeNull (src/__tests__/frame-processor-integration.test.ts:359:22)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame data to native processor correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"bytesPerRow": 7680, "height": 1080, "isMirrored": false, "isValid": true, "orientation": "portrait", "pixelBuffer": null, "pixelFormat": "yuv", "planarImage": true, "planesCount": 1, "timestamp": 1750865883058, "width": 1920}

    Number of calls: 0

      378 |
      379 |       // Assert
    > 380 |       expect(mockPlugin.call).toHaveBeenCalledWith(mockFrame);
          |                               ^
      381 |       expect(result).toBeDefined();
      382 |       expect(result!.success).toBe(true);
      383 |     });

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:380:31)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame metadata to native processor

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"height": 720, "orientation": "landscape", "timestamp": 1234567890, "width": 1280}

    Number of calls: 0

      410 |
      411 |       // Assert
    > 412 |       expect(mockPlugin.call).toHaveBeenCalledWith(
          |                               ^
      413 |         expect.objectContaining({
      414 |           width: 1280,
      415 |           height: 720,

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:412:31)

  ● Frame Processor Integration Tests › Multi-Frame Processing › should handle sequential frame processing

    expect(received).toBe(expected) // Object.is equality

    Expected: "HIGH"
    Received: "RAPID"

      447 |       // Assert
      448 |       expect(results[0]).toMatchObject({ success: true });
    > 449 |       expect(results[0]!.data?.firstName).toBe('HIGH');
          |                                           ^
      450 |       expect(results[1]).toMatchObject({ success: true });
      451 |       expect(results[1]!.data?.firstName).toBe('LOW');
      452 |       expect(results[2]).toBeNull();

      at Object.toBe (src/__tests__/frame-processor-integration.test.ts:449:43)

FAIL src/__tests__/bridge-communication-integration.test.ts
  Bridge Communication Integration Tests
    Native Module Method Invocation
      ✕ should handle scanLicense bridge communication correctly (6 ms)
      ✕ should handle parseOCRText bridge communication correctly (3 ms)
      ✓ should handle platform-specific native module calls (ios)
      ✓ should handle platform-specific native module calls (android)
    Promise and Callback Handling
      ✕ should handle successful promise resolution (3 ms)
      ✕ should handle promise rejection with proper error mapping
      ✕ should handle timeout errors appropriately
    Data Serialization and Deserialization
      ✕ should properly serialize complex license data (1 ms)
      ✕ should handle partial data deserialization gracefully
      ✕ should handle OCR text observation arrays correctly
    Multi-State License Support
      ✕ should handle California (CA) license processing via bridge
      ✕ should handle Texas (TX) license processing via bridge (1 ms)
      ✕ should handle New York (NY) license processing via bridge
      ✕ should handle Florida (FL) license processing via bridge
      ✕ should handle Washington (WA) license processing via bridge
      ✕ should handle Oregon (OR) license processing via bridge
      ✕ should handle Arizona (AZ) license processing via bridge
      ✕ should handle Nevada (NV) license processing via bridge
      ✕ should handle Colorado (CO) license processing via bridge
      ✕ should handle Utah (UT) license processing via bridge
    Performance and Load Testing
      ✕ should handle rapid sequential bridge calls
      ✕ should handle concurrent bridge operations efficiently
      ✓ should manage memory effectively during continuous operations
    Error Recovery and Resilience
      ✕ should recover from transient bridge communication failures
      ✕ should handle system-level errors appropriately
      ✕ should handle permission-related errors with proper guidance (1 ms)
    Bridge Event Handling
      ✓ should handle native events from bridge properly
      ✓ should clean up bridge resources properly
    Bridge Configuration and Initialization
      ✕ should configure iOS-specific bridge features
      ○ skipped should configure Android-specific bridge features (iOS only)

  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle scanLicense bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "@
        ANSI 636014080000DAQ D1234567 DCSDOE DACJOHN DADQUINCY DBB01151990 DBA01152026 DBD01012020 DBC1 DAU510 DAG123 MAIN ST DAILOS ANGELES DAJCA DAK90210"

    Number of calls: 0

      58 |
      59 |       // Assert
    > 60 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(testBarcode);
         |                                            ^
      61 |       expect(result).toEqual(expectedLicenseData);
      62 |     });
      63 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:60:44)

  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle parseOCRText bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      73 |
      74 |       // Assert
    > 75 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(testOCRData);
         |                                             ^
      76 |       expect(result).toBeDefined();
      77 |     });
      78 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:75:45)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle successful promise resolution

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "HOUSTON", "postalCode": "77001", "state": "TX", "street": "456 OAK AVE"}, "dateOfBirth": 1985-03-20T00:00:00.000Z, "expirationDate": 2025-03-20T00:00:00.000Z, "firstName": "JANE", "issuerIdentificationNumber": "636015", "lastName": "SMITH", "licenseClass": "C", "licenseNumber": "TX12345678", "sex": "F"}
    Received: undefined

      113 |
      114 |       // Assert
    > 115 |       expect(result).toEqual(testData);
          |                      ^
      116 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(1);
      117 |     });
      118 |

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:115:22)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle promise rejection with proper error mapping

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      125 |       await expect(
      126 |         scanLicense(TestFixtures.barcodes.invalid.malformed)
    > 127 |       ).rejects.toThrow(ScanError);
          |                 ^
      128 |     });
      129 |
      130 |     it('should handle timeout errors appropriately', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:127:17)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle timeout errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      139 |
      140 |       // Act & Assert
    > 141 |       await expect(scanLicense('slow-barcode')).rejects.toThrow(
          |                                                         ^
      142 |         'Scanning took too long'
      143 |       );
      144 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:141:57)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should properly serialize complex license data

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "LOS ANGELES", "country": "USA", "postalCode": "90210", "state": "CA", "street": "123 MAIN ST"}, "customFields": {"additionalEndorsements": ["MOTORCYCLE", "COMMERCIAL"], "organDonor": false, "veteranStatus": true}, "dateOfBirth": 1990-01-15T00:00:00.000Z, "documentDiscriminator": "1234567890123456789012345678", "endorsements": "NONE", "expirationDate": 2026-01-15T00:00:00.000Z, "eyeColor": "BRO", "firstName": "JOHN", "hairColor": "BRN", "height": "5-10", "isOrganDonor": true, "isRealID": true, "isVeteran": false, "issueDate": 2020-01-01T00:00:00.000Z, "issuerIdentificationNumber": "636014", "lastName": "DOE", "licenseClass": "C", "licenseNumber": "D1234567", "middleName": "QUINCY", "restrictions": "NONE", "sex": "M", "weight": "180"}
    Received: undefined

      165 |
      166 |       // Assert
    > 167 |       expect(result).toEqual(complexLicenseData);
          |                      ^
      168 |       expect(result.customFields).toBeDefined();
      169 |       expect(result.customFields.additionalEndorsements).toHaveLength(2);
      170 |     });

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:167:22)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle partial data deserialization gracefully

    TypeError: Cannot read properties of undefined (reading 'firstName')

      181 |
      182 |       // Assert
    > 183 |       expect(result.firstName).toBe('INCOMPLETE');
          |                     ^
      184 |       expect(result.lastName).toBe('DATA');
      185 |       expect(result.dateOfBirth).toBeUndefined();
      186 |     });

      at Object.firstName (src/__tests__/bridge-communication-integration.test.ts:183:21)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle OCR text observation arrays correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      197 |
      198 |       // Assert
    > 199 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(
          |                                             ^
      200 |         ocrObservations
      201 |       );
      202 |       expect(Array.isArray(ocrObservations)).toBe(true);

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:199:45)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle California (CA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Texas (TX) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle New York (NY) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Florida (FL) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Washington (WA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Oregon (OR) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Arizona (AZ) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Nevada (NV) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Colorado (CO) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Utah (UT) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle rapid sequential bridge calls

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 10
    Received number of calls: 0

      263 |       // Assert
      264 |       expect(result).toHaveLength(10);
    > 265 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(10);
          |                                            ^
      266 |       expect(executionTime).toBeLessThan(2000); // Overall safety limit
      267 |     });
      268 |

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:265:44)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle concurrent bridge operations efficiently

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      299 |       expect(results).toHaveLength(3);
      300 |       expect(totalTime).toBeLessThan(500); // Concurrent calls should be faster
    > 301 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(3);
          |                                            ^
      302 |     });
      303 |
      304 |     it('should manage memory effectively during continuous operations', async () => {

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:301:44)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should recover from transient bridge communication failures

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      345 |         throw new Error('Expected first call to fail');
      346 |       } catch (error) {
    > 347 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      348 |         expect((error as ScanError).code).toBe('NETWORK_ERROR');
      349 |       }
      350 |

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:347:23)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle system-level errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      365 |
      366 |       // Act & Assert
    > 367 |       await expect(scanLicense('test-barcode')).rejects.toThrow(
          |                                                         ^
      368 |         'An unexpected error occurred'
      369 |       );
      370 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:367:57)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle permission-related errors with proper guidance

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      382 |         throw new Error('Expected permission error');
      383 |       } catch (error) {
    > 384 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      385 |         expect((error as ScanError).code).toBe('CAMERA_PERMISSION_DENIED');
      386 |         expect((error as ScanError).userMessage).toContain('camera permission');
      387 |         expect((error as ScanError).recoverable).toBe(true);

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:384:23)

  ● Bridge Communication Integration Tests › Bridge Configuration and Initialization › should configure iOS-specific bridge features

    expect(received).toBeDefined()

    Received: undefined

      413 |       () => {
      414 |         // iOS-specific bridge configuration testing
    > 415 |         expect(mockNativeModule.configureVisionFramework).toBeDefined();
          |                                                           ^
      416 |         expect(mockNativeModule.enableHapticFeedback).toBeDefined();
      417 |       }
      418 |     );

      at Object.toBeDefined (src/__tests__/bridge-communication-integration.test.ts:415:59)

FAIL src/__tests__/QualityIndicatorPerformance.test.ts
  Quality Indicator Performance Tests
    Frame Processing Performance
      ✕ should maintain 60fps with quality metric calculations (9 ms)
      ✓ should throttle quality updates to 10fps maximum (1 ms)
      ✓ should handle high-frequency quality metric calculations efficiently (3 ms)
    Memory Performance
      ✕ should not leak memory during continuous operation (1 ms)
      ✓ should efficiently cache quality metrics (2 ms)
    Component Rendering Performance
      ✓ should render quality indicators without performance impact (18 ms)
    Integration Performance
      ✕ should maintain overall performance targets with quality system active

  ● Quality Indicator Performance Tests › Frame Processing Performance › should maintain 60fps with quality metric calculations

    ReferenceError: metrics is not defined

      57 |
      58 |       // Should maintain target frame rate
    > 59 |       expect(metrics?.frameProcessingRate).toBeGreaterThanOrEqual(55); // Allow some variance
         |              ^
      60 |
      61 |       // No frames should be dropped
      62 |       expect(metrics?.framesDropped).toBe(0);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:59:14)

  ● Quality Indicator Performance Tests › Memory Performance › should not leak memory during continuous operation

    ReferenceError: metrics is not defined

      159 |
      160 |       // Memory delta should be within acceptable bounds
    > 161 |       expect(metrics?.memoryDeltaMB).toBeLessThan(10); // Less than 10MB increase
          |              ^
      162 |
      163 |       // Should meet memory target
      164 |       expect(metrics?.meetsMemoryTarget).toBe(true);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:161:14)

  ● Quality Indicator Performance Tests › Integration Performance › should maintain overall performance targets with quality system active

    ReferenceError: metrics is not defined

      306 |
      307 |       // Should meet all performance targets
    > 308 |       expect(metrics?.meetsFallbackTarget).toBe(true);
          |              ^
      309 |       expect(metrics?.meetsMemoryTarget).toBe(true);
      310 |       expect(metrics?.meetsCpuTarget).toBe(true);
      311 |

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:308:14)

FAIL src/utils/__tests__/IntelligentModeManager.test.ts
  IntelligentModeManager
    Initialization
      ✓ should initialize with default configuration (3 ms)
      ✓ should initialize with custom configuration
      ✓ should start in INITIAL_PDF417 state
    Auto-mode session management
      ✕ should start auto-mode session and setup timers (1 ms)
      ✓ should trigger warning threshold after configured time (1 ms)
      ✓ should trigger timeout fallback after configured time (1 ms)
      ✓ should handle success state transition
    Quality metrics processing
      ✓ should process quality metrics and not trigger switch for good quality
      ✓ should not trigger switch with insufficient frames (1 ms)
      ✕ should trigger quality-based fallback with consistently poor quality
      ✕ should calculate quality score correctly (1 ms)
      ✓ should maintain quality history buffer of max 5 frames (2 ms)
    Progress information
      ✕ should provide accurate progress information
      ✓ should provide accessibility announcements
    Threshold checks
      ✓ should correctly report warning threshold status
      ✓ should correctly report timeout status (1 ms)
      ✓ should provide accurate time measurements
    Configuration management
      ✓ should update configuration correctly
    Cleanup and cancellation
      ✓ should cancel session and clear timers
      ✓ should destroy manager cleanly (1 ms)
    Edge cases
      ✓ should handle rapid session start/stop
      ✓ should handle quality metrics before session start
      ✓ should handle markSuccess before session start
      ✓ should handle multiple destroy calls
    Event emission
      ✕ should emit all expected events during normal flow (3 ms)
      ✓ should work without event handlers (1 ms)

  ● IntelligentModeManager › Auto-mode session management › should start auto-mode session and setup timers

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      87 |
      88 |       expect(manager.getCurrentAutoState()).toBe(AutoModeState.INITIAL_PDF417);
    > 89 |       expect(manager.getTimeElapsed()).toBeGreaterThan(0);
         |                                        ^
      90 |       expect(manager.getTimeRemaining()).toBeLessThanOrEqual(10000);
      91 |     });
      92 |

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:89:40)

  ● IntelligentModeManager › Quality metrics processing › should trigger quality-based fallback with consistently poor quality

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      194 |       const shouldSwitch = manager.processQualityMetrics(poorMetrics);
      195 |
    > 196 |       expect(shouldSwitch).toBe(true);
          |                            ^
      197 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledWith(
      198 |         AutoModeState.INITIAL_PDF417,
      199 |         AutoModeState.SWITCHING_TO_OCR

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:196:28)

  ● IntelligentModeManager › Quality metrics processing › should calculate quality score correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      234 |       manager.processQualityMetrics(poorMetrics);
      235 |       shouldSwitch = manager.processQualityMetrics(poorMetrics);
    > 236 |       expect(shouldSwitch).toBe(true); // Should switch for poor quality
          |                            ^
      237 |     });
      238 |
      239 |     it('should maintain quality history buffer of max 5 frames', () => {

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:236:28)

  ● IntelligentModeManager › Progress information › should provide accurate progress information

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      259 |       // Immediately after start
      260 |       let progress = manager.getProgressInfo();
    > 261 |       expect(progress.timeElapsed).toBeGreaterThan(0);
          |                                    ^
      262 |       expect(progress.estimatedTimeRemaining).toBeLessThanOrEqual(10000);
      263 |       expect(progress.progressPercentage).toBeGreaterThan(0);
      264 |       expect(progress.isTransitioning).toBe(false);

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:261:36)

  ● IntelligentModeManager › Event emission › should emit all expected events during normal flow

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 4

      433 |       expect(mockEvents.onQualityAssessment).toHaveBeenCalled();
      434 |       expect(mockEvents.onWarningThresholdReached).toHaveBeenCalled();
    > 435 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledTimes(3);
          |                                                ^
      436 |       expect(mockEvents.onModeRecommendation).toHaveBeenCalled();
      437 |     });
      438 |

      at Object.toHaveBeenCalledTimes (src/utils/__tests__/IntelligentModeManager.test.ts:435:48)

FAIL src/hooks/__tests__/useThrottledQualityMetrics.test.ts
  useThrottledQualityMetrics
    ✓ should initialize with undefined metrics (4 ms)
    ✓ should provide updateMetrics function (2 ms)
    ✕ should throttle metrics updates (1 ms)
    ✕ should handle multiple rapid updates with throttling (1 ms)
    ✓ should handle setMetrics as an alias for updateMetrics
    ✓ should maintain throttle function identity across re-renders (1 ms)
    ✓ should work with frameProcessor parameter
    ✓ should handle null metrics gracefully (1 ms)
    ✓ should respect the 100ms throttle interval for 10fps max update rate

  ● useThrottledQualityMetrics › should throttle metrics updates

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": true, "score": 0.85}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      65 |
      66 |     // Metrics should not be immediately updated due to throttling
    > 67 |     expect(result.current.metrics).toBeUndefined();
         |                                    ^
      68 |
      69 |     // Fast forward time to trigger throttled update
      70 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:67:36)

  ● useThrottledQualityMetrics › should handle multiple rapid updates with throttling

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": false, "score": 0.5}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      103 |
      104 |     // Should still be undefined due to throttling
    > 105 |     expect(result.current.metrics).toBeUndefined();
          |                                    ^
      106 |
      107 |     // Advance time to process throttled update
      108 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:105:36)

PASS src/__tests__/fallback-integration.test.ts
  Fallback Integration Pipeline
    Successful barcode scanning
      ✓ should complete barcode scan without fallback (8 ms)
    Automatic fallback scenarios
      ✓ should fallback from barcode to OCR on invalid format error (2 ms)
      ✓ should fallback on barcode timeout (1 ms)
      ✓ should handle fallback failure gracefully (2 ms)
    Mode-specific scanning
      ✓ should perform barcode-only scan (1 ms)
      ✓ should perform OCR-only scan (1 ms)
      ✓ should not fallback in barcode-only mode (1 ms)
    Performance requirements
      ✓ should complete fallback within 4 seconds (1 ms)
      ✓ should track performance metrics accurately (2 ms)
    Progress tracking
      ✓ should provide progress updates during scanning (1 ms)
    Error recovery
      ✓ should allow retry after error (1 ms)
    Cancellation
      ✓ should cancel ongoing scan operation (2 ms)

PASS src/hooks/__tests__/useErrorHandler.test.ts
  useErrorHandler
    initialization
      ✓ should initialize with no error and zero count (2 ms)
      ✓ should accept options parameter
    handleError
      ✓ should handle ScanError with camera permission denied (1 ms)
      ✓ should handle detection timeout errors
      ✓ should handle system errors
      ✓ should handle vision framework errors (1 ms)
      ✓ should handle generic Error objects (1 ms)
      ✓ should show alert for non-recoverable errors
      ✓ should show alert after multiple recoverable errors (>5) (1 ms)
      ✓ should not show alert for recoverable errors under threshold (3 ms)
      ✓ should reset error count when retry is pressed after threshold (1 ms)
    clearError
      ✓ should clear error and reset count
    camera permission settings integration
      ✓ should open settings when Open Settings is pressed (1 ms)
    hook stability
      ✓ should maintain function references across re-renders when options unchanged (1 ms)
      ✓ should update function references when options change

FAIL e2e/errorScenarios.test.ts
  Error Handling Scenarios E2E
    Camera Permission Denial
      ✕ should handle camera permission denial gracefully (4 ms)
      ✕ should retry camera access after permission granted (1 ms)
      ✕ should provide clear guidance for permission issues
    Poor Lighting Conditions
      ✕ should detect and warn about poor lighting conditions
      ✕ should continue scanning despite lighting warnings
      ✕ should auto-dismiss lighting warnings when conditions improve
    Invalid Barcode Handling
      ✕ should handle malformed barcode data gracefully
      ✕ should handle wrong barcode format (non-PDF417)
      ✕ should handle corrupted barcode data (1 ms)
      ✕ should handle multiple consecutive scan failures
    Network Failure Scenarios
      ✕ should handle network connectivity issues during processing
      ✕ should offer offline processing when network is unavailable
      ✕ should queue scans for retry when network returns (1 ms)
      ✕ should handle API service unavailability
    System-Level Error Recovery
      ✕ should recover from app crashes during scanning
      ✕ should handle device memory pressure gracefully
      ✕ should provide appropriate error reporting options

  ● Error Handling Scenarios E2E › Camera Permission Denial › should handle camera permission denial gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should retry camera access after permission granted

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should provide clear guidance for permission issues

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should detect and warn about poor lighting conditions

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should continue scanning despite lighting warnings

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should auto-dismiss lighting warnings when conditions improve

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle malformed barcode data gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle wrong barcode format (non-PDF417)

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle corrupted barcode data

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle multiple consecutive scan failures

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle network connectivity issues during processing

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should offer offline processing when network is unavailable

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should queue scans for retry when network returns

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle API service unavailability

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should recover from app crashes during scanning

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should handle device memory pressure gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should provide appropriate error reporting options

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

PASS src/utils/__tests__/logger.test.ts
  logger
    ✓ should sanitize sensitive data in strings (2 ms)
    ✓ should sanitize sensitive fields in objects
    ✓ should store logs with correct metadata
    ✓ should limit stored logs to maxLogs (1 ms)
    ✓ should clear all logs
    ✓ should handle nested objects
    ✓ should handle arrays
    ✓ should call console methods in development
    Performance tracking
      ✓ should start and stop timers (10 ms)
      ✓ should handle non-existent timers
      ✓ should measure function execution time (11 ms)
      ✓ should retry operations with exponential backoff (4 ms)
      ✓ should track memory usage
      ✓ should enforce memory limits (10 ms)
      ✓ should clear performance metrics

FAIL e2e/deviceMatrix.test.ts
  Device Matrix E2E Tests
    Screen Size Adaptation
      ✕ should adapt UI layout for small screens (iPhone 13 mini) (2 ms)
      ✕ should adapt UI layout for large screens (iPhone 14 Pro Max)
      ✕ should handle tablet layouts appropriately
    Orientation Support
      ✕ should handle portrait to landscape orientation change
      ✕ should handle landscape to portrait orientation change
      ✕ should maintain scan guide aspect ratio across orientations
      ✕ should handle rapid orientation changes gracefully (1 ms)
    Platform-Specific Features
      ✕ should utilize iOS-specific features when available
      ✕ should utilize Android-specific features when available
    Performance Across Devices
      ✕ should maintain acceptable performance on lower-end devices
      ✕ should optimize performance on high-end devices
      ✕ should handle memory constraints appropriately per device
    Accessibility Across Device Matrix
      ✕ should support accessibility features on all device sizes
      ✕ should support voice-over and screen readers
    Device-Specific Error Handling
      ✕ should handle device-specific camera limitations
      ✕ should adapt error messages for device capabilities

  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for small screens (iPhone 13 mini)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for large screens (iPhone 14 Pro Max)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should handle tablet layouts appropriately

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle portrait to landscape orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle landscape to portrait orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should maintain scan guide aspect ratio across orientations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle rapid orientation changes gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize iOS-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize Android-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should maintain acceptable performance on lower-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should optimize performance on high-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should handle memory constraints appropriately per device

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support accessibility features on all device sizes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support voice-over and screen readers

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should handle device-specific camera limitations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should adapt error messages for device capabilities

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

FAIL e2e/scanningFlow.test.ts
  Driver License Scanning Flow E2E
    PDF417 Barcode Scanning Happy Path
      ✕ should complete PDF417 scanning successfully with California license (2 ms)
      ✕ should handle Texas license PDF417 scanning
      ✕ should show scanning progress and processing indicators
    OCR Fallback Activation
      ✕ should activate OCR fallback when PDF417 scanning times out
      ✕ should complete OCR scanning workflow (1 ms)
    Mode Switching Behaviors
      ✕ should allow manual switch between PDF417 and OCR modes
      ✕ should maintain scanning state during mode switches
    Scanning Timeout Scenarios
      ✕ should handle PDF417 scanning timeout gracefully
      ✕ should handle OCR scanning timeout with retry options
      ✕ should provide helpful timeout guidance to users
    User Experience and Navigation
      ✕ should provide clear scanning instructions throughout the flow
      ✕ should allow users to cancel scanning and return to main screen
    Performance and Responsiveness
      ✕ should start scanning within acceptable time limits
      ✕ should process scan results within performance requirements
      ✕ should maintain responsive UI during scanning operations

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

PASS src/utils/__tests__/formatters.test.ts
  Date Formatting
    formatDate
      ✓ formats valid date strings correctly (46 ms)
      ✓ handles invalid dates gracefully
      ✓ handles edge cases
    formatShortDate
      ✓ formats dates in short format
      ✓ handles invalid dates gracefully
    calculateAge
      ✓ calculates age correctly
      ✓ handles edge cases
  Name Formatting
    formatFullName
      ✓ formats complete names correctly
      ✓ handles missing middle name
      ✓ handles missing parts gracefully
      ✓ trims whitespace
    formatLastNameFirst
      ✓ formats names in last name first format
      ✓ handles missing middle name
      ✓ falls back to normal format when no last name
  Address Formatting
    formatAddress
      ✓ formats complete address correctly (1 ms)
      ✓ handles missing components
      ✓ handles empty address
    formatAddressMultiline
      ✓ formats address in multiple lines
      ✓ handles missing street
  Physical Measurements
    formatHeight
      ✓ converts inches to feet and inches
      ✓ preserves already formatted heights (1 ms)
      ✓ handles invalid input (1 ms)
    formatWeight
      ✓ adds pounds unit to numeric weight (1 ms)
      ✓ preserves already formatted weights
      ✓ handles invalid input
  License Number Formatting
    formatLicenseNumber
      ✓ normalizes whitespace
      ✓ handles empty input
  Date Validation
    isDateExpired
      ✓ identifies expired dates correctly
      ✓ handles invalid dates
    isDateValid
      ✓ validates date strings correctly
  Data Quality Assessment
    calculateDataCompleteness
      ✓ calculates completeness for full data (1 ms)
      ✓ calculates completeness for partial data
      ✓ handles empty data
  Text Utilities
    cleanText
      ✓ normalizes whitespace and removes special characters
      ✓ preserves allowed characters
      ✓ handles empty input
    capitalizeWords
      ✓ capitalizes each word
      ✓ handles empty input
  State Code Formatting
    formatStateCode
      ✓ validates and formats US state codes
      ✓ handles empty input
  Confidence Utilities
    formatConfidenceLevel
      ✓ returns correct confidence levels (1 ms)
    getConfidenceColor
      ✓ returns correct colors for confidence levels

PASS src/frameProcessors/__tests__/scanLicense.test.ts
  scanLicense frame processor
    ✓ should return null when no barcode is detected (6 ms)
    ✓ should return successful result when barcode is detected (2 ms)
    ✓ should return error result when detection fails (3 ms)
    ✓ should handle invalid plugin response (1 ms)
    ✓ should throw error when plugin is not loaded (6 ms)

PASS src/__tests__/OptimizationBenchmark.test.ts
  Optimization Benchmarks
    Optimized Performance
      ✓ should process barcode scans efficiently (2 ms)
      ✓ should process OCR scans efficiently
      ✓ should handle multiple scans efficiently (2 ms)
      ✓ should demonstrate memory efficiency
      ✓ should validate optimization effectiveness (1 ms)
    Optimization Features
      ✓ should use optimized retry logic
      ✓ should use optimized Neural Engine processing
    Overhead Reduction
      ✓ should minimize logging overhead
      ✓ should handle state transitions efficiently (1 ms)

PASS src/__tests__/PerformanceMonitor.unit.test.ts
  Performance Monitor Unit Tests
    Basic Session Management
      ✓ should start and end a performance session (20 ms)
      ✓ should handle checkpoints correctly
      ✓ should track memory allocations
      ✓ should track resource utilization (1 ms)
    Performance Target Validation
      ✓ should validate OCR processing target (<2000ms)
      ✓ should validate fallback processing target (<4000ms)
      ✓ should validate memory usage target (<50MB)
      ✓ should validate CPU utilization target (<60%)
    Alert Generation
      ✓ should generate alerts for threshold violations (1 ms)
      ✓ should clear alerts when requested
    Benchmarking
      ✓ should generate benchmark reports (1 ms)
      ✓ should detect performance regression
    Performance Targets
      ✓ should return correct performance targets
    Stress Testing
      ✓ should handle multiple concurrent sessions gracefully
      ✓ should handle operations without active session
    Memory Simulation
      ✓ should simulate memory growth patterns (1 ms)

PASS src/hooks/__tests__/useLicenseScanner.test.ts
  useLicenseScanner
    ✓ should initialize with default state (5 ms)
    ✓ should initialize with custom options (1 ms)
    ✓ should scan with fallback successfully (2 ms)
    ✓ should scan barcode only (1 ms)
    ✓ should scan OCR only (2 ms)
    ✓ should scan with automatic fallback (1 ms)
    ✓ should handle scan errors (2 ms)
    ✓ should handle unknown errors (1 ms)
    ✓ should handle controller not initialized error (1 ms)
    ✓ should set scanning state during scan (153 ms)
    ✓ should cancel scan operation (2 ms)
    ✓ should update fallback configuration (2 ms)
    ✓ should reset state (1 ms)
    ✓ should clear error (7 ms)
    ✓ should handle progress updates and update currentMode (2 ms)
    ✓ should handle mode switch events (2 ms)
    ✓ should handle metrics updates (1 ms)
    ✓ should cleanup controller on unmount (3 ms)
    ✓ backward compatibility: hook works without options (7 ms)
    ✓ should respect mode option when no mode provided to scan
    ✓ should set correct initial currentMode based on mode and input (3 ms)
    ✓ should reset to configured mode on reset (3 ms)

FAIL src/components/__tests__/CameraScanner.test.tsx
  CameraScanner
    Mode Support
      ✓ should default to auto mode (65 ms)
      ✓ should display barcode-specific instructions in barcode mode (1 ms)
      ✓ should display OCR-specific instructions in OCR mode (1 ms)
      ✓ should call onModeChange when mode changes (3 ms)
    Backward Compatibility
      ✓ should work without mode prop (legacy usage) (3 ms)
      ✕ should maintain existing props functionality (162 ms)
    Frame Processor Config
      ✓ should accept frame processor configuration (1 ms)
    Permission Handling
      ✕ should show permission denied UI when camera permission is denied (7 ms)
      ✓ should show loading state while checking permissions (12 ms)
    Device Handling
      ✓ should show error when no camera device is available (2 ms)

  ● CameraScanner › Backward Compatibility › should maintain existing props functionality

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      56 |   onCancel,
      57 | }) => {
    > 58 |   const fadeAnim = useRef(new Animated.Value(0)).current;
         |                               ^
      59 |   const slideAnim = useRef(new Animated.Value(-100)).current;
      60 |   const progressAnim = useRef(new Animated.Value(0)).current;
      61 |

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/CameraScanner.tsx:58:31)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:130:35)

  ● CameraScanner › Permission Handling › should show permission denied UI when camera permission is denied

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      418 |       <View style={styles.container}>
      419 |         <Text style={styles.message}>Camera permission denied</Text>
    > 420 |         <TouchableOpacity
          |          ^
      421 |           style={styles.button}
      422 |           onPress={handlePermissionDenied}
      423 |         >

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/Touchable/TouchableOpacity.js:14:1)
      at Object.require [as TouchableOpacity] (node_modules/react-native/index.js:127:12)
      at TouchableOpacity (src/components/CameraScanner.tsx:420:10)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:166:35)

FAIL src/components/__tests__/ModeSelector.test.tsx
  ModeSelector
    ✕ renders correctly with all three modes (219 ms)
    ✕ highlights the current mode (2 ms)
    ✕ calls onModeChange when a mode is tapped (1 ms)
    ✕ provides haptic feedback on iOS when mode is selected (1 ms)
    ✕ announces mode changes for accessibility (2 ms)
    ✕ disables interaction when disabled prop is true (1 ms)
    ✕ shows description on long press (1 ms)
    ✕ maintains correct accessibility states (1 ms)
    ✕ cycles through modes correctly

  ● ModeSelector › renders correctly with all three modes

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:21:49)

  ● ModeSelector › highlights the current mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:32:43)

  ● ModeSelector › calls onModeChange when a mode is tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:49:33)

  ● ModeSelector › provides haptic feedback on iOS when mode is selected

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:65:33)

  ● ModeSelector › announces mode changes for accessibility

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:76:33)

  ● ModeSelector › disables interaction when disabled prop is true

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:87:33)

  ● ModeSelector › shows description on long press

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:102:46)

  ● ModeSelector › maintains correct accessibility states

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:134:38)

  ● ModeSelector › cycles through modes correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:149:43)

FAIL __tests__/bridge.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL __tests__/performance.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL src/__tests__/index.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL src/__tests__/DLScanModule.test.ts
  ● Test suite failed to run

    Cannot find module '../DLScanModule' from 'src/__tests__/DLScanModule.test.ts'

      1 | import { NativeModules } from 'react-native';
    > 2 | import DLScanModule from '../DLScanModule';
        | ^
      3 |
      4 | // Mock the native module
      5 | jest.mock('react-native', () => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/__tests__/DLScanModule.test.ts:2:1)

FAIL __tests__/integration.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL __tests__/ocr-parsing.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL src/screens/__tests__/ResultScreen.test.tsx
  ResultScreen
    Rendering
      ✕ renders correctly with complete data (254 ms)
      ✕ renders correctly with partial data (2 ms)
      ✕ displays success header with scan mode (2 ms)
    Personal Information Section
      ✕ displays full name correctly (1 ms)
      ✕ calculates and displays age (4 ms)
      ✕ handles missing personal information gracefully (5 ms)
    Address Section
      ✕ formats complete address correctly (3 ms)
      ✕ handles missing address gracefully (1 ms)
    License Details Section
      ✕ displays license information correctly (1 ms)
      ✕ shows expiry status for valid license (1 ms)
      ✕ shows expired status for expired license (1 ms)
    Physical Description Section
      ✕ renders collapsible physical description section (1 ms)
      ✕ expands physical description when tapped (5 ms)
      ✕ hides section when no physical data available (2 ms)
    Document Metadata Section
      ✕ displays scan mode correctly (2 ms)
      ✕ displays confidence score when available (3 ms)
      ✕ handles missing confidence gracefully (2 ms)
    Action Bar
      ✕ renders all action buttons (3 ms)
      ✕ calls onRescan when Rescan button is pressed (4 ms)
      ✕ calls onDone when Done button is pressed (2 ms)
      ✕ calls onReportIssue when Report Issue button is pressed (3 ms)
      ✕ shows alert when Report Issue is pressed without handler (4 ms)
    Accessibility
      ✕ has proper accessibility labels for buttons (1 ms)
      ✕ has accessibility label for collapsible section
    Edge Cases
      ✕ handles null/undefined data fields gracefully (1 ms)
      ✕ handles invalid date formats gracefully (1 ms)

  ● ResultScreen › Rendering › renders correctly with complete data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:90:32)

  ● ResultScreen › Rendering › renders correctly with partial data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:102:32)

  ● ResultScreen › Rendering › displays success header with scan mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:114:35)

  ● ResultScreen › Personal Information Section › displays full name correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:129:35)

  ● ResultScreen › Personal Information Section › calculates and displays age

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:141:35)

  ● ResultScreen › Personal Information Section › handles missing personal information gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:154:35)

  ● ResultScreen › Address Section › formats complete address correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:169:35)

  ● ResultScreen › Address Section › handles missing address gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:181:35)

  ● ResultScreen › License Details Section › displays license information correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:197:35)

  ● ResultScreen › License Details Section › shows expiry status for valid license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:210:35)

  ● ResultScreen › License Details Section › shows expired status for expired license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:222:35)

  ● ResultScreen › Physical Description Section › renders collapsible physical description section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:236:48)

  ● ResultScreen › Physical Description Section › expands physical description when tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:251:35)

  ● ResultScreen › Physical Description Section › hides section when no physical data available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:269:37)

  ● ResultScreen › Document Metadata Section › displays scan mode correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:283:35)

  ● ResultScreen › Document Metadata Section › displays confidence score when available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:295:35)

  ● ResultScreen › Document Metadata Section › handles missing confidence gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:307:37)

  ● ResultScreen › Action Bar › renders all action buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:322:35)

  ● ResultScreen › Action Bar › calls onRescan when Rescan button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:337:35)

  ● ResultScreen › Action Bar › calls onDone when Done button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:350:35)

  ● ResultScreen › Action Bar › calls onReportIssue when Report Issue button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:363:35)

  ● ResultScreen › Action Bar › shows alert when Report Issue is pressed without handler

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:377:35)

  ● ResultScreen › Accessibility › has proper accessibility labels for buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:396:40)

  ● ResultScreen › Accessibility › has accessibility label for collapsible section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:410:40)

  ● ResultScreen › Edge Cases › handles null/undefined data fields gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:431:35)

  ● ResultScreen › Edge Cases › handles invalid date formats gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:456:35)

FAIL src/components/__tests__/QualityIndicator.enhanced.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      17 | jest.mock('react-native', () => {
      18 |   const RN = jest.requireActual('react-native');
    > 19 |   return {
         |   ^
      20 |     ...RN,
      21 |     AccessibilityInfo: {
      22 |       announceForAccessibility: jest.fn(),

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/Touchable/TouchableOpacity.js:14:1)
      at Object.require (node_modules/react-native/Libraries/Components/Button.js:25:1)
      at Object.require [as Button] (node_modules/react-native/index.js:47:12)
      at src/components/__tests__/QualityIndicator.enhanced.test.tsx:19:3
      at Object.require (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:2:1)
      at Object.require (node_modules/@testing-library/react-native/src/matchers/to-be-busy.ts:5:1)
      at Object.require (node_modules/@testing-library/react-native/src/matchers/extend-expect.ts:1:1)
      at Object.require (node_modules/@testing-library/react-native/src/index.ts:2:1)
      at Object.require (src/components/__tests__/QualityIndicator.enhanced.test.tsx:2:1)

FAIL src/components/__tests__/ScanningOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      4 | // Mock react-native-reanimated
      5 | jest.mock('react-native-reanimated', () => {
    > 6 |   const Reanimated = require('react-native-reanimated/mock');
        |                      ^
      7 |   Reanimated.default.call = () => {};
      8 |   return Reanimated;
      9 | });

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (src/components/__tests__/ScanningOverlay.test.tsx:6:22)
      at Object.require (src/components/ScanningOverlay.tsx:10:1)
      at Object.require (src/components/__tests__/ScanningOverlay.test.tsx:2:1)

FAIL src/components/__tests__/GuidanceOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      57 | // Mock react-native-reanimated more comprehensively
      58 | jest.mock('react-native-reanimated', () => {
    > 59 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      60 |
      61 |   // Add any additional functions if needed
      62 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:59:22)
      at Object.require (src/components/GuidanceOverlay.tsx:3:1)
      at Object.require (src/components/__tests__/GuidanceOverlay.test.tsx:3:1)

FAIL src/__tests__/PerformanceBenchmarks.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      57 | // Mock react-native-reanimated more comprehensively
      58 | jest.mock('react-native-reanimated', () => {
    > 59 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      60 |
      61 |   // Add any additional functions if needed
      62 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:59:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (src/utils/FallbackController.ts:15:1)
      at Object.require (src/__tests__/PerformanceBenchmarks.test.ts:1:1)

PASS src/__tests__/SimpleRegressionValidation.test.ts
  Simplified Performance Regression Validation
    Performance Baseline Validation
      ✓ should maintain barcode scanning performance within baseline (275 ms)
      ✓ should maintain OCR scanning performance within baseline (388 ms)
      ✓ should maintain fallback processing performance within baseline (113 ms)
    Regression Detection Algorithms
      ✓ should detect performance regression through statistical analysis (185 ms)
      ✓ should validate performance consistency (detect variance regression) (277 ms)
      ✓ should validate memory stability (no memory leaks) (295 ms)
    Automated Regression Alerts
      ✓ should generate regression alerts with actionable insights (2 ms)
      ✓ should validate regression detection thresholds (3 ms)

FAIL src/__tests__/PerformanceRegression.test.ts (5.164 s)
  Performance Regression Tests
    Baseline Performance Validation
      ✕ should establish baseline for barcode scanning performance (613 ms)
      ✕ should establish baseline for OCR scanning performance (923 ms)
      ✕ should establish baseline for fallback processing performance (353 ms)
    Regression Detection
      ✕ should detect timing performance regression (391 ms)
      ✕ should detect memory usage regression (721 ms)
      ✕ should track performance trends over time (525 ms)
    Performance Stability
      ✕ should maintain consistent performance under load (581 ms)
      ✓ should handle edge cases without performance degradation (130 ms)
    Resource Usage Regression
      ✓ should not regress in CPU utilization (275 ms)
    Automated Regression Reporting
      ✓ should generate comprehensive regression report (3 ms)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for barcode scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      138 |
      139 |       // Ensure we have results
    > 140 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      141 |
      142 |       // Calculate performance statistics
      143 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:140:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for OCR scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      225 |
      226 |       // Ensure we have results
    > 227 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      228 |
      229 |       // Calculate performance statistics
      230 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:227:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for fallback processing performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      283 |
      284 |       // Ensure we have results
    > 285 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      286 |
      287 |       // Calculate performance statistics
      288 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:285:30)

  ● Performance Regression Tests › Regression Detection › should detect timing performance regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      332 |
      333 |       // Ensure we have results
    > 334 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      335 |
      336 |       // Calculate p95 timing
      337 |       const sortedTimes = results.filter((t) => t > 0).sort((a, b) => a - b);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:334:30)

  ● Performance Regression Tests › Regression Detection › should detect memory usage regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      393 |
      394 |       // Ensure we have memory data
    > 395 |       expect(memoryDeltas.length).toBeGreaterThan(0);
          |                                   ^
      396 |
      397 |       // Calculate memory usage statistics
      398 |       const validMemoryDeltas = memoryDeltas.filter((d) => !isNaN(d) && d >= 0);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:395:35)

  ● Performance Regression Tests › Regression Detection › should track performance trends over time

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      520 |
      521 |       // Analyze trend across runs
    > 522 |       expect(benchmarkRuns.length).toBeGreaterThan(0);
          |                                    ^
      523 |
      524 |       if (benchmarkRuns.length >= 2) {
      525 |         const firstRun = benchmarkRuns[0];

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:522:36)

  ● Performance Regression Tests › Performance Stability › should maintain consistent performance under load

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      566 |
      567 |       // Ensure we have valid results
    > 568 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      569 |       const validResults = results.filter((r) => r > 0 && !isNaN(r));
      570 |       expect(validResults.length).toBeGreaterThan(0);
      571 |

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:568:30)

FAIL src/utils/__tests__/FallbackController.test.ts (6.863 s)
  FallbackController
    Configuration
      ✓ should use default configuration when none provided (3 ms)
      ✓ should accept custom configuration
      ✓ should update configuration at runtime
    Barcode scanning
      ✓ should successfully scan barcode in barcode mode (26 ms)
      ✕ should fail gracefully when barcode scanning fails in barcode mode (350 ms)
    OCR scanning
      ✓ should successfully scan OCR in OCR mode
      ✕ should fail gracefully when OCR scanning fails (102 ms)
    Automatic fallback
      ✕ should fallback to OCR when barcode scanning fails (303 ms)
      ✓ should fallback to OCR on timeout (506 ms)
      ✕ should not fallback when not in auto mode (507 ms)
      ✓ should not fallback when remaining time is insufficient (594 ms)
    Progress tracking
      ✕ should emit progress updates during scanning (8 ms)
      ✕ should emit metrics updates (6 ms)
    Cancellation
      ✓ should reset state when cancelled (1 ms)
    State management
      ✓ should track scanning state correctly (3 ms)
      ✓ should track mode correctly (1 ms)
    Error handling
      ✓ should handle invalid input types (2 ms)
      ✕ should wrap unknown errors in ScanError (499 ms)
    Performance requirements
      ✕ should complete fallback process within 4 seconds (3307 ms)

  ● FallbackController › Barcode scanning › should fail gracefully when barcode scanning fails in barcode mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan returned no data"

          343 |           // Ensure we have a valid result
          344 |           if (!result) {
        > 345 |             throw new ScanError({
              |                   ^
          346 |               code: 'BARCODE_SCAN_ERROR',
          347 |               message: 'Barcode scan returned no data',
          348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.scan (src/utils/FallbackController.ts:136:18)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:175:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:177:17)

  ● FallbackController › OCR scanning › should fail gracefully when OCR scanning fails

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      200 |       mockParseOCRText.mockRejectedValueOnce(ocrError);
      201 |
    > 202 |       await expect(controller.scan(mockOCRData, 'ocr')).rejects.toThrow(
          |             ^
      203 |         'OCR parsing failed'
      204 |       );
      205 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/utils/__tests__/FallbackController.test.ts:202:13)

  ● FallbackController › Automatic fallback › should fallback to OCR when barcode scanning fails

    ScanError: Barcode scan returned no data

      343 |           // Ensure we have a valid result
      344 |           if (!result) {
    > 345 |             throw new ScanError({
          |                   ^
      346 |               code: 'BARCODE_SCAN_ERROR',
      347 |               message: 'Barcode scan returned no data',
      348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.performBarcodeScanWithFallback (src/utils/FallbackController.ts:204:22)
      at FallbackController.scan (src/utils/FallbackController.ts:146:22)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:220:22)

  ● FallbackController › Automatic fallback › should not fallback when not in auto mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan timeout"

          237 |             setTimeout(() => {
          238 |               reject(
        > 239 |                 new ScanError({
              |                 ^
          240 |                   code: 'TIMEOUT_ERROR',
          241 |                   message: 'Barcode scan timeout',
          242 |                   userMessage: 'Barcode scan took too long',

      at Timeout._onTimeout (src/utils/__tests__/FallbackController.test.ts:239:17)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:273:17)

  ● FallbackController › Progress tracking › should emit progress updates during scanning

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttempts": 1, "mode": "barcode", "state": "barcode"}
    Received
           1: {"barcodeAttempts": 0, "message": "Scanning barcode...", "mode": "barcode", "startTime": 1750865885455, "state": "barcode", "timeElapsed": 0}
           2: {"barcodeAttempts": 1, "message": "Scan completed successfully", "mode": "barcode", "startTime": 1750865885455, "state": "completed", "timeElapsed": 0}

    Number of calls: 2

      310 |       await controller.scan('test-barcode', 'barcode');
      311 |
    > 312 |       expect(events.onProgressUpdate).toHaveBeenCalledWith(
          |                                       ^
      313 |         expect.objectContaining({
      314 |           state: 'barcode',
      315 |           mode: 'barcode',

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:312:39)

  ● FallbackController › Progress tracking › should emit metrics updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttemptTime": Any<Number>, "finalMode": "barcode", "totalProcessingTime": Any<Number>}
    Received
           1: {"finalMode": "barcode", "success": true, "totalProcessingTime": 0}
           2: {"bottlenecks": [], "detailedPerformance": {"averageCpuUtilization": undefined, "averageGpuUtilization": undefined, "finalMemoryUsageMB": 101.9032855511625, "frameProcessingRate": undefined, "framesDropped": 0, "framesProcessed": 0, "initialMemoryUsageMB": 103.63724685770484, "meetsCpuTarget": true, "meetsFallbackTarget": true, "meetsMemoryTarget": true, "meetsOcrTarget": true, "memoryAllocations": 0, "memoryDeallocations": 0, "memoryDeltaMB": -1.7339613065423407, "peakCpuUtilization": undefined, "peakGpuUtilization": undefined, "peakMemoryUsageMB": 101.9032855511625, "totalProcessingTime": 1}, "modeTransitionTime": undefined, "ocrProcessingTime": undefined, "peakMemoryUsageMB": 101.9032855511625, "performanceAlerts": [], "performanceRating": "excellent", "recommendations": [], "totalProcessingTime": 1}

    Number of calls: 2

      324 |       await controller.scan('test-barcode', 'barcode');
      325 |
    > 326 |       expect(events.onMetricsUpdate).toHaveBeenCalledWith(
          |                                      ^
      327 |         expect.objectContaining({
      328 |           finalMode: 'barcode',
      329 |           barcodeAttemptTime: expect.any(Number),

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:326:38)

  ● FallbackController › Error handling › should wrap unknown errors in ScanError

    expect(received).toBe(expected) // Object.is equality

    Expected: "BARCODE_SCAN_ERROR"
    Received: "INVALID_BARCODE_FORMAT"

      383 |       } catch (error) {
      384 |         expect(error).toBeInstanceOf(ScanError);
    > 385 |         expect((error as ScanError).code).toBe('BARCODE_SCAN_ERROR');
          |                                           ^
      386 |         expect((error as ScanError).message).toBe('Barcode scanning failed');
      387 |       }
      388 |     });

      at Object.toBe (src/utils/__tests__/FallbackController.test.ts:385:43)

  ● FallbackController › Performance requirements › should complete fallback process within 4 seconds

    ScanError: Invalid barcode format

      391 |   describe('Performance requirements', () => {
      392 |     test('should complete fallback process within 4 seconds', async () => {
    > 393 |       const barcodeError = new ScanError({
          |                            ^
      394 |         code: 'INVALID_BARCODE_FORMAT',
      395 |         message: 'Invalid barcode format',
      396 |         userMessage: 'Unable to read barcode',

      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:393:28)

PASS src/utils/__tests__/FallbackController.memory.test.ts (11.91 s)
  FallbackController Memory Management
    Timer Management
      ✓ should clean up all timers when destroyed (1 ms)
      ✓ should clean up timers when scan is cancelled (5006 ms)
      ✓ should handle timer callback errors gracefully (24 ms)
      ✓ should prevent timer execution after abort (5002 ms)
    Resource Cleanup
      ✓ should clear all references on destroy (4 ms)
      ✓ should handle destruction errors gracefully (2 ms)
      ✓ should be safe to call destroy multiple times
    Memory Leak Prevention
      ✓ should not accumulate timers across multiple operations (1823 ms)
      ✓ should clean up timers on scan completion (3 ms)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
--------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------
File                            | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                 
--------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------
All files                       |   55.49 |    40.56 |    53.5 |   55.75 |                                                                                                                                                   
 src                            |       0 |        0 |       0 |       0 |                                                                                                                                                   
  NativeDlScan.ts               |       0 |        0 |       0 |       0 |                                                                                                                                                   
 src/components                 |    9.12 |     5.93 |    6.54 |    9.48 |                                                                                                                                                   
  AlignmentGuides.tsx           |       0 |        0 |       0 |       0 | 15-231                                                                                                                                            
  CameraScanner.tsx             |   32.45 |    25.49 |   28.57 |   33.03 | 59-139,235-237,256-268,274-276,280-281,287-305,315,325-385,392-399                                                                                
  CameraViewExample.tsx         |       0 |        0 |       0 |       0 | 12-71                                                                                                                                             
  GuidanceOverlay.tsx           |       0 |        0 |       0 |       0 | 43-196                                                                                                                                            
  IntelligentScannerExample.tsx |       0 |        0 |       0 |       0 | 13-258                                                                                                                                            
  ModeSelector.tsx              |    11.3 |      4.1 |    3.33 |   11.71 | 54-55,63,69,91,114-205,258-432                                                                                                                    
  QualityIndicator.tsx          |       0 |        0 |       0 |       0 | 16-356                                                                                                                                            
  ScanningOverlay.tsx           |       0 |        0 |       0 |       0 | 24-341                                                                                                                                            
  ScanningOverlayContainer.tsx  |       0 |        0 |       0 |       0 | 41-247                                                                                                                                            
  index.ts                      |       0 |        0 |       0 |       0 |                                                                                                                                                   
  types.ts                      |       0 |      100 |     100 |       0 | 44-63                                                                                                                                             
 src/frameProcessors            |   79.54 |       84 |   85.71 |   79.54 |                                                                                                                                                   
  qualityMetrics.ts             |     100 |    94.73 |     100 |     100 | 48,130,208                                                                                                                                        
  scanLicense.ts                |     100 |      100 |     100 |     100 |                                                                                                                                                   
  scanOCR.ts                    |       0 |        0 |       0 |       0 | 7-49                                                                                                                                              
 src/hooks                      |   87.83 |    79.36 |   78.78 |   87.75 |                                                                                                                                                   
  index.ts                      |       0 |        0 |       0 |       0 |                                                                                                                                                   
  useErrorHandler.ts            |     100 |      100 |     100 |     100 |                                                                                                                                                   
  useLicenseScanner.ts          |   84.07 |       74 |      72 |   83.92 | 84-85,119-151,190,307-310,337-341                                                                                                                 
  useThrottledQualityMetrics.ts |     100 |      100 |     100 |     100 |                                                                                                                                                   
 src/screens                    |      24 |        0 |    6.66 |   25.53 |                                                                                                                                                   
  ResultScreen.tsx              |      24 |        0 |    6.66 |   25.53 | 40-44,62-75,88-106,133-143,166-183,209-218,260-263                                                                                                
 src/styles                     |       0 |      100 |     100 |       0 |                                                                                                                                                   
  theme.ts                      |       0 |      100 |     100 |       0 | 4-347                                                                                                                                             
 src/test-utils                 |       0 |        0 |       0 |       0 |                                                                                                                                                   
  mockOCRData.ts                |       0 |        0 |       0 |       0 | 12-132                                                                                                                                            
 src/utils                      |   83.06 |    70.79 |   83.13 |   83.24 |                                                                                                                                                   
  FallbackController.ts         |   80.64 |    63.19 |   81.48 |   81.71 | 81-98,149,223-227,259,275-285,292,368,391,439,456,470,535-536,590-603,699-702,712,718,724,728,734,749-750,754-755,759-760,764,788,809,829,929,974 
  IntelligentModeManager.ts     |      90 |    79.48 |     100 |   90.75 | 71-72,93,105,335-337,355-357,395,406,442                                                                                                          
  PerformanceMonitor.ts         |   75.88 |    59.77 |   69.76 |   75.91 | 123-131,138-146,153-161,190,204,220,232-234,241-343,549                                                                                           
  formatters.ts                 |   95.83 |     92.3 |     100 |   95.93 | 26,48,76,198,209                                                                                                                                  
  logger.ts                     |   87.12 |    62.26 |   94.73 |   86.86 | 181,192-201,203,249-261,301-304,322                                                                                                               
  storage.ts                    |   36.66 |    41.66 |    37.5 |   36.66 | 33-36,42-45,54-82,97-105                                                                                                                          
--------------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------
Jest: "global" coverage threshold for statements (80%) not met: 55.49%
Jest: "global" coverage threshold for branches (80%) not met: 40.56%
Jest: "global" coverage threshold for lines (80%) not met: 55.75%
Jest: "global" coverage threshold for functions (80%) not met: 53.5%
Summary of all failing tests
FAIL src/frameProcessors/__tests__/qualityMetrics.test.ts
  ● qualityMetrics › convertLegacyMetrics › should handle poor quality legacy metrics

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "poor"

      116 |       expect(converted.blur.status).toBe('poor');
      117 |       expect(converted.lighting.status).toBe('poor');
    > 118 |       expect(converted.positioning.status).toBe('warning');
          |                                            ^
      119 |       expect(converted.overall.readyToScan).toBe(false);
      120 |     });
      121 |

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:118:44)

  ● qualityMetrics › convertLegacyMetrics › should estimate uniformity from brightness

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.72
    Received: 0.7200000000000001

      131 |
      132 |       // Uniformity should be estimated as brightness * 0.9
    > 133 |       expect(converted.lighting.uniformity).toBe(0.72);
          |                                             ^
      134 |     });
      135 |
      136 |     it('should set document detected based on positioning', () => {

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:133:45)

FAIL src/__tests__/frame-processor-integration.test.ts
  ● Frame Processor Integration Tests › Error Handling › should handle native processing errors gracefully

    expect(received).toThrow(expected)

    Expected substring: "Native processing error"

    Received function did not throw

      337 |
      338 |       // Act & Assert
    > 339 |       expect(() => scanLicenseFrame(mockFrame)).toThrow(
          |                                                 ^
      340 |         'Native processing error'
      341 |       );
      342 |     });

      at Object.toThrow (src/__tests__/frame-processor-integration.test.ts:339:49)

  ● Frame Processor Integration Tests › Error Handling › should handle invalid frame properties

    expect(received).toBeNull()

    Received: {"data": {"firstName": "RAPID", "lastName": "TEST"}, "processingTime": 50, "success": true}

      357 |
      358 |       // Assert - Frame processor should handle invalid frames gracefully
    > 359 |       expect(result).toBeNull();
          |                      ^
      360 |     });
      361 |   });
      362 |

      at Object.toBeNull (src/__tests__/frame-processor-integration.test.ts:359:22)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame data to native processor correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"bytesPerRow": 7680, "height": 1080, "isMirrored": false, "isValid": true, "orientation": "portrait", "pixelBuffer": null, "pixelFormat": "yuv", "planarImage": true, "planesCount": 1, "timestamp": 1750865883058, "width": 1920}

    Number of calls: 0

      378 |
      379 |       // Assert
    > 380 |       expect(mockPlugin.call).toHaveBeenCalledWith(mockFrame);
          |                               ^
      381 |       expect(result).toBeDefined();
      382 |       expect(result!.success).toBe(true);
      383 |     });

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:380:31)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame metadata to native processor

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"height": 720, "orientation": "landscape", "timestamp": 1234567890, "width": 1280}

    Number of calls: 0

      410 |
      411 |       // Assert
    > 412 |       expect(mockPlugin.call).toHaveBeenCalledWith(
          |                               ^
      413 |         expect.objectContaining({
      414 |           width: 1280,
      415 |           height: 720,

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:412:31)

  ● Frame Processor Integration Tests › Multi-Frame Processing › should handle sequential frame processing

    expect(received).toBe(expected) // Object.is equality

    Expected: "HIGH"
    Received: "RAPID"

      447 |       // Assert
      448 |       expect(results[0]).toMatchObject({ success: true });
    > 449 |       expect(results[0]!.data?.firstName).toBe('HIGH');
          |                                           ^
      450 |       expect(results[1]).toMatchObject({ success: true });
      451 |       expect(results[1]!.data?.firstName).toBe('LOW');
      452 |       expect(results[2]).toBeNull();

      at Object.toBe (src/__tests__/frame-processor-integration.test.ts:449:43)

FAIL src/__tests__/bridge-communication-integration.test.ts
  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle scanLicense bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "@
        ANSI 636014080000DAQ D1234567 DCSDOE DACJOHN DADQUINCY DBB01151990 DBA01152026 DBD01012020 DBC1 DAU510 DAG123 MAIN ST DAILOS ANGELES DAJCA DAK90210"

    Number of calls: 0

      58 |
      59 |       // Assert
    > 60 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(testBarcode);
         |                                            ^
      61 |       expect(result).toEqual(expectedLicenseData);
      62 |     });
      63 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:60:44)

  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle parseOCRText bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      73 |
      74 |       // Assert
    > 75 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(testOCRData);
         |                                             ^
      76 |       expect(result).toBeDefined();
      77 |     });
      78 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:75:45)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle successful promise resolution

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "HOUSTON", "postalCode": "77001", "state": "TX", "street": "456 OAK AVE"}, "dateOfBirth": 1985-03-20T00:00:00.000Z, "expirationDate": 2025-03-20T00:00:00.000Z, "firstName": "JANE", "issuerIdentificationNumber": "636015", "lastName": "SMITH", "licenseClass": "C", "licenseNumber": "TX12345678", "sex": "F"}
    Received: undefined

      113 |
      114 |       // Assert
    > 115 |       expect(result).toEqual(testData);
          |                      ^
      116 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(1);
      117 |     });
      118 |

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:115:22)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle promise rejection with proper error mapping

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      125 |       await expect(
      126 |         scanLicense(TestFixtures.barcodes.invalid.malformed)
    > 127 |       ).rejects.toThrow(ScanError);
          |                 ^
      128 |     });
      129 |
      130 |     it('should handle timeout errors appropriately', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:127:17)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle timeout errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      139 |
      140 |       // Act & Assert
    > 141 |       await expect(scanLicense('slow-barcode')).rejects.toThrow(
          |                                                         ^
      142 |         'Scanning took too long'
      143 |       );
      144 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:141:57)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should properly serialize complex license data

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "LOS ANGELES", "country": "USA", "postalCode": "90210", "state": "CA", "street": "123 MAIN ST"}, "customFields": {"additionalEndorsements": ["MOTORCYCLE", "COMMERCIAL"], "organDonor": false, "veteranStatus": true}, "dateOfBirth": 1990-01-15T00:00:00.000Z, "documentDiscriminator": "1234567890123456789012345678", "endorsements": "NONE", "expirationDate": 2026-01-15T00:00:00.000Z, "eyeColor": "BRO", "firstName": "JOHN", "hairColor": "BRN", "height": "5-10", "isOrganDonor": true, "isRealID": true, "isVeteran": false, "issueDate": 2020-01-01T00:00:00.000Z, "issuerIdentificationNumber": "636014", "lastName": "DOE", "licenseClass": "C", "licenseNumber": "D1234567", "middleName": "QUINCY", "restrictions": "NONE", "sex": "M", "weight": "180"}
    Received: undefined

      165 |
      166 |       // Assert
    > 167 |       expect(result).toEqual(complexLicenseData);
          |                      ^
      168 |       expect(result.customFields).toBeDefined();
      169 |       expect(result.customFields.additionalEndorsements).toHaveLength(2);
      170 |     });

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:167:22)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle partial data deserialization gracefully

    TypeError: Cannot read properties of undefined (reading 'firstName')

      181 |
      182 |       // Assert
    > 183 |       expect(result.firstName).toBe('INCOMPLETE');
          |                     ^
      184 |       expect(result.lastName).toBe('DATA');
      185 |       expect(result.dateOfBirth).toBeUndefined();
      186 |     });

      at Object.firstName (src/__tests__/bridge-communication-integration.test.ts:183:21)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle OCR text observation arrays correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      197 |
      198 |       // Assert
    > 199 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(
          |                                             ^
      200 |         ocrObservations
      201 |       );
      202 |       expect(Array.isArray(ocrObservations)).toBe(true);

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:199:45)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle California (CA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Texas (TX) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle New York (NY) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Florida (FL) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Washington (WA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Oregon (OR) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Arizona (AZ) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Nevada (NV) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Colorado (CO) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Utah (UT) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      232 |
      233 |         // Assert
    > 234 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      235 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      236 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      237 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:234:23)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle rapid sequential bridge calls

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 10
    Received number of calls: 0

      263 |       // Assert
      264 |       expect(result).toHaveLength(10);
    > 265 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(10);
          |                                            ^
      266 |       expect(executionTime).toBeLessThan(2000); // Overall safety limit
      267 |     });
      268 |

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:265:44)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle concurrent bridge operations efficiently

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      299 |       expect(results).toHaveLength(3);
      300 |       expect(totalTime).toBeLessThan(500); // Concurrent calls should be faster
    > 301 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(3);
          |                                            ^
      302 |     });
      303 |
      304 |     it('should manage memory effectively during continuous operations', async () => {

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:301:44)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should recover from transient bridge communication failures

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      345 |         throw new Error('Expected first call to fail');
      346 |       } catch (error) {
    > 347 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      348 |         expect((error as ScanError).code).toBe('NETWORK_ERROR');
      349 |       }
      350 |

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:347:23)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle system-level errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      365 |
      366 |       // Act & Assert
    > 367 |       await expect(scanLicense('test-barcode')).rejects.toThrow(
          |                                                         ^
      368 |         'An unexpected error occurred'
      369 |       );
      370 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:367:57)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle permission-related errors with proper guidance

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      382 |         throw new Error('Expected permission error');
      383 |       } catch (error) {
    > 384 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      385 |         expect((error as ScanError).code).toBe('CAMERA_PERMISSION_DENIED');
      386 |         expect((error as ScanError).userMessage).toContain('camera permission');
      387 |         expect((error as ScanError).recoverable).toBe(true);

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:384:23)

  ● Bridge Communication Integration Tests › Bridge Configuration and Initialization › should configure iOS-specific bridge features

    expect(received).toBeDefined()

    Received: undefined

      413 |       () => {
      414 |         // iOS-specific bridge configuration testing
    > 415 |         expect(mockNativeModule.configureVisionFramework).toBeDefined();
          |                                                           ^
      416 |         expect(mockNativeModule.enableHapticFeedback).toBeDefined();
      417 |       }
      418 |     );

      at Object.toBeDefined (src/__tests__/bridge-communication-integration.test.ts:415:59)

FAIL src/__tests__/QualityIndicatorPerformance.test.ts
  ● Quality Indicator Performance Tests › Frame Processing Performance › should maintain 60fps with quality metric calculations

    ReferenceError: metrics is not defined

      57 |
      58 |       // Should maintain target frame rate
    > 59 |       expect(metrics?.frameProcessingRate).toBeGreaterThanOrEqual(55); // Allow some variance
         |              ^
      60 |
      61 |       // No frames should be dropped
      62 |       expect(metrics?.framesDropped).toBe(0);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:59:14)

  ● Quality Indicator Performance Tests › Memory Performance › should not leak memory during continuous operation

    ReferenceError: metrics is not defined

      159 |
      160 |       // Memory delta should be within acceptable bounds
    > 161 |       expect(metrics?.memoryDeltaMB).toBeLessThan(10); // Less than 10MB increase
          |              ^
      162 |
      163 |       // Should meet memory target
      164 |       expect(metrics?.meetsMemoryTarget).toBe(true);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:161:14)

  ● Quality Indicator Performance Tests › Integration Performance › should maintain overall performance targets with quality system active

    ReferenceError: metrics is not defined

      306 |
      307 |       // Should meet all performance targets
    > 308 |       expect(metrics?.meetsFallbackTarget).toBe(true);
          |              ^
      309 |       expect(metrics?.meetsMemoryTarget).toBe(true);
      310 |       expect(metrics?.meetsCpuTarget).toBe(true);
      311 |

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:308:14)

FAIL src/utils/__tests__/IntelligentModeManager.test.ts
  ● IntelligentModeManager › Auto-mode session management › should start auto-mode session and setup timers

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      87 |
      88 |       expect(manager.getCurrentAutoState()).toBe(AutoModeState.INITIAL_PDF417);
    > 89 |       expect(manager.getTimeElapsed()).toBeGreaterThan(0);
         |                                        ^
      90 |       expect(manager.getTimeRemaining()).toBeLessThanOrEqual(10000);
      91 |     });
      92 |

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:89:40)

  ● IntelligentModeManager › Quality metrics processing › should trigger quality-based fallback with consistently poor quality

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      194 |       const shouldSwitch = manager.processQualityMetrics(poorMetrics);
      195 |
    > 196 |       expect(shouldSwitch).toBe(true);
          |                            ^
      197 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledWith(
      198 |         AutoModeState.INITIAL_PDF417,
      199 |         AutoModeState.SWITCHING_TO_OCR

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:196:28)

  ● IntelligentModeManager › Quality metrics processing › should calculate quality score correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      234 |       manager.processQualityMetrics(poorMetrics);
      235 |       shouldSwitch = manager.processQualityMetrics(poorMetrics);
    > 236 |       expect(shouldSwitch).toBe(true); // Should switch for poor quality
          |                            ^
      237 |     });
      238 |
      239 |     it('should maintain quality history buffer of max 5 frames', () => {

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:236:28)

  ● IntelligentModeManager › Progress information › should provide accurate progress information

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      259 |       // Immediately after start
      260 |       let progress = manager.getProgressInfo();
    > 261 |       expect(progress.timeElapsed).toBeGreaterThan(0);
          |                                    ^
      262 |       expect(progress.estimatedTimeRemaining).toBeLessThanOrEqual(10000);
      263 |       expect(progress.progressPercentage).toBeGreaterThan(0);
      264 |       expect(progress.isTransitioning).toBe(false);

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:261:36)

  ● IntelligentModeManager › Event emission › should emit all expected events during normal flow

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 4

      433 |       expect(mockEvents.onQualityAssessment).toHaveBeenCalled();
      434 |       expect(mockEvents.onWarningThresholdReached).toHaveBeenCalled();
    > 435 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledTimes(3);
          |                                                ^
      436 |       expect(mockEvents.onModeRecommendation).toHaveBeenCalled();
      437 |     });
      438 |

      at Object.toHaveBeenCalledTimes (src/utils/__tests__/IntelligentModeManager.test.ts:435:48)

FAIL src/hooks/__tests__/useThrottledQualityMetrics.test.ts
  ● useThrottledQualityMetrics › should throttle metrics updates

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": true, "score": 0.85}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      65 |
      66 |     // Metrics should not be immediately updated due to throttling
    > 67 |     expect(result.current.metrics).toBeUndefined();
         |                                    ^
      68 |
      69 |     // Fast forward time to trigger throttled update
      70 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:67:36)

  ● useThrottledQualityMetrics › should handle multiple rapid updates with throttling

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": false, "score": 0.5}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      103 |
      104 |     // Should still be undefined due to throttling
    > 105 |     expect(result.current.metrics).toBeUndefined();
          |                                    ^
      106 |
      107 |     // Advance time to process throttled update
      108 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:105:36)

FAIL e2e/errorScenarios.test.ts
  ● Error Handling Scenarios E2E › Camera Permission Denial › should handle camera permission denial gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should retry camera access after permission granted

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should provide clear guidance for permission issues

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should detect and warn about poor lighting conditions

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should continue scanning despite lighting warnings

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should auto-dismiss lighting warnings when conditions improve

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle malformed barcode data gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle wrong barcode format (non-PDF417)

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle corrupted barcode data

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle multiple consecutive scan failures

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle network connectivity issues during processing

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should offer offline processing when network is unavailable

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should queue scans for retry when network returns

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle API service unavailability

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should recover from app crashes during scanning

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should handle device memory pressure gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should provide appropriate error reporting options

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

FAIL e2e/deviceMatrix.test.ts
  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for small screens (iPhone 13 mini)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for large screens (iPhone 14 Pro Max)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should handle tablet layouts appropriately

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle portrait to landscape orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle landscape to portrait orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should maintain scan guide aspect ratio across orientations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle rapid orientation changes gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize iOS-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize Android-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should maintain acceptable performance on lower-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should optimize performance on high-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should handle memory constraints appropriately per device

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support accessibility features on all device sizes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support voice-over and screen readers

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should handle device-specific camera limitations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should adapt error messages for device capabilities

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

FAIL e2e/scanningFlow.test.ts
  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

FAIL src/components/__tests__/CameraScanner.test.tsx
  ● CameraScanner › Backward Compatibility › should maintain existing props functionality

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      56 |   onCancel,
      57 | }) => {
    > 58 |   const fadeAnim = useRef(new Animated.Value(0)).current;
         |                               ^
      59 |   const slideAnim = useRef(new Animated.Value(-100)).current;
      60 |   const progressAnim = useRef(new Animated.Value(0)).current;
      61 |

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/CameraScanner.tsx:58:31)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:130:35)

  ● CameraScanner › Permission Handling › should show permission denied UI when camera permission is denied

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      418 |       <View style={styles.container}>
      419 |         <Text style={styles.message}>Camera permission denied</Text>
    > 420 |         <TouchableOpacity
          |          ^
      421 |           style={styles.button}
      422 |           onPress={handlePermissionDenied}
      423 |         >

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/Touchable/TouchableOpacity.js:14:1)
      at Object.require [as TouchableOpacity] (node_modules/react-native/index.js:127:12)
      at TouchableOpacity (src/components/CameraScanner.tsx:420:10)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:166:35)

FAIL src/components/__tests__/ModeSelector.test.tsx
  ● ModeSelector › renders correctly with all three modes

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:21:49)

  ● ModeSelector › highlights the current mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:32:43)

  ● ModeSelector › calls onModeChange when a mode is tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:49:33)

  ● ModeSelector › provides haptic feedback on iOS when mode is selected

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:65:33)

  ● ModeSelector › announces mode changes for accessibility

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:76:33)

  ● ModeSelector › disables interaction when disabled prop is true

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:87:33)

  ● ModeSelector › shows description on long press

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:102:46)

  ● ModeSelector › maintains correct accessibility states

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:134:38)

  ● ModeSelector › cycles through modes correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:149:43)

FAIL __tests__/bridge.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL __tests__/performance.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL src/__tests__/index.test.tsx
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL src/__tests__/DLScanModule.test.ts
  ● Test suite failed to run

    Cannot find module '../DLScanModule' from 'src/__tests__/DLScanModule.test.ts'

      1 | import { NativeModules } from 'react-native';
    > 2 | import DLScanModule from '../DLScanModule';
        | ^
      3 |
      4 | // Mock the native module
      5 | jest.mock('react-native', () => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/__tests__/DLScanModule.test.ts:2:1)

FAIL __tests__/integration.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL __tests__/ocr-parsing.test.ts
  ● Test suite failed to run

    TypeError: _reactNative.TurboModuleRegistry.get is not a function

      at Object.get (node_modules/react-native-reanimated/src/specs/NativeReanimatedModule.ts:9:36)
      at Object.require (node_modules/react-native-reanimated/src/specs/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/NativeWorklets.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/workletsModuleInstance.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/WorkletsModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/worklets/index.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/JSReanimated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/js-reanimated/index.ts:12:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/reanimatedModuleInstance.ts:4:1)
      at Object.require (node_modules/react-native-reanimated/src/ReanimatedModule/index.ts:3:1)
      at Object.require (node_modules/react-native-reanimated/src/threads.ts:6:1)
      at Object.require (node_modules/react-native-reanimated/src/initializers.ts:17:1)
      at Object.require (node_modules/react-native-reanimated/src/core.ts:19:1)
      at Object.require (node_modules/react-native-reanimated/src/Colors.ts:10:1)
      at Object.require (node_modules/react-native-reanimated/src/animation/styleAnimation.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/layoutReanimation/animationsManager.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx:2:1)
      at Object.require (node_modules/react-native-reanimated/src/createAnimatedComponent/index.ts:2:1)
      at Object.require (node_modules/react-native-reanimated/src/component/FlatList.tsx:12:1)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:20:1)

FAIL src/screens/__tests__/ResultScreen.test.tsx
  ● ResultScreen › Rendering › renders correctly with complete data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:90:32)

  ● ResultScreen › Rendering › renders correctly with partial data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:102:32)

  ● ResultScreen › Rendering › displays success header with scan mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:114:35)

  ● ResultScreen › Personal Information Section › displays full name correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:129:35)

  ● ResultScreen › Personal Information Section › calculates and displays age

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:141:35)

  ● ResultScreen › Personal Information Section › handles missing personal information gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:154:35)

  ● ResultScreen › Address Section › formats complete address correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:169:35)

  ● ResultScreen › Address Section › handles missing address gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:181:35)

  ● ResultScreen › License Details Section › displays license information correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:197:35)

  ● ResultScreen › License Details Section › shows expiry status for valid license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:210:35)

  ● ResultScreen › License Details Section › shows expired status for expired license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:222:35)

  ● ResultScreen › Physical Description Section › renders collapsible physical description section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:236:48)

  ● ResultScreen › Physical Description Section › expands physical description when tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:251:35)

  ● ResultScreen › Physical Description Section › hides section when no physical data available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:269:37)

  ● ResultScreen › Document Metadata Section › displays scan mode correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:283:35)

  ● ResultScreen › Document Metadata Section › displays confidence score when available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:295:35)

  ● ResultScreen › Document Metadata Section › handles missing confidence gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:307:37)

  ● ResultScreen › Action Bar › renders all action buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:322:35)

  ● ResultScreen › Action Bar › calls onRescan when Rescan button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:337:35)

  ● ResultScreen › Action Bar › calls onDone when Done button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:350:35)

  ● ResultScreen › Action Bar › calls onReportIssue when Report Issue button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:363:35)

  ● ResultScreen › Action Bar › shows alert when Report Issue is pressed without handler

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:377:35)

  ● ResultScreen › Accessibility › has proper accessibility labels for buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:396:40)

  ● ResultScreen › Accessibility › has accessibility label for collapsible section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:410:40)

  ● ResultScreen › Edge Cases › handles null/undefined data fields gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:431:35)

  ● ResultScreen › Edge Cases › handles invalid date formats gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:456:35)

FAIL src/components/__tests__/QualityIndicator.enhanced.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      17 | jest.mock('react-native', () => {
      18 |   const RN = jest.requireActual('react-native');
    > 19 |   return {
         |   ^
      20 |     ...RN,
      21 |     AccessibilityInfo: {
      22 |       announceForAccessibility: jest.fn(),

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/Touchable/TouchableOpacity.js:14:1)
      at Object.require (node_modules/react-native/Libraries/Components/Button.js:25:1)
      at Object.require [as Button] (node_modules/react-native/index.js:47:12)
      at src/components/__tests__/QualityIndicator.enhanced.test.tsx:19:3
      at Object.require (node_modules/@testing-library/react-native/src/helpers/accessibility.ts:2:1)
      at Object.require (node_modules/@testing-library/react-native/src/matchers/to-be-busy.ts:5:1)
      at Object.require (node_modules/@testing-library/react-native/src/matchers/extend-expect.ts:1:1)
      at Object.require (node_modules/@testing-library/react-native/src/index.ts:2:1)
      at Object.require (src/components/__tests__/QualityIndicator.enhanced.test.tsx:2:1)

FAIL src/components/__tests__/ScanningOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      4 | // Mock react-native-reanimated
      5 | jest.mock('react-native-reanimated', () => {
    > 6 |   const Reanimated = require('react-native-reanimated/mock');
        |                      ^
      7 |   Reanimated.default.call = () => {};
      8 |   return Reanimated;
      9 | });

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (src/components/__tests__/ScanningOverlay.test.tsx:6:22)
      at Object.require (src/components/ScanningOverlay.tsx:10:1)
      at Object.require (src/components/__tests__/ScanningOverlay.test.tsx:2:1)

FAIL src/components/__tests__/GuidanceOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      57 | // Mock react-native-reanimated more comprehensively
      58 | jest.mock('react-native-reanimated', () => {
    > 59 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      60 |
      61 |   // Add any additional functions if needed
      62 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:59:22)
      at Object.require (src/components/GuidanceOverlay.tsx:3:1)
      at Object.require (src/components/__tests__/GuidanceOverlay.test.tsx:3:1)

FAIL src/__tests__/PerformanceBenchmarks.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      57 | // Mock react-native-reanimated more comprehensively
      58 | jest.mock('react-native-reanimated', () => {
    > 59 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      60 |
      61 |   // Add any additional functions if needed
      62 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:59:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (src/utils/FallbackController.ts:15:1)
      at Object.require (src/__tests__/PerformanceBenchmarks.test.ts:1:1)

FAIL src/__tests__/PerformanceRegression.test.ts (5.164 s)
  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for barcode scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      138 |
      139 |       // Ensure we have results
    > 140 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      141 |
      142 |       // Calculate performance statistics
      143 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:140:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for OCR scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      225 |
      226 |       // Ensure we have results
    > 227 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      228 |
      229 |       // Calculate performance statistics
      230 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:227:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for fallback processing performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      283 |
      284 |       // Ensure we have results
    > 285 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      286 |
      287 |       // Calculate performance statistics
      288 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:285:30)

  ● Performance Regression Tests › Regression Detection › should detect timing performance regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      332 |
      333 |       // Ensure we have results
    > 334 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      335 |
      336 |       // Calculate p95 timing
      337 |       const sortedTimes = results.filter((t) => t > 0).sort((a, b) => a - b);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:334:30)

  ● Performance Regression Tests › Regression Detection › should detect memory usage regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      393 |
      394 |       // Ensure we have memory data
    > 395 |       expect(memoryDeltas.length).toBeGreaterThan(0);
          |                                   ^
      396 |
      397 |       // Calculate memory usage statistics
      398 |       const validMemoryDeltas = memoryDeltas.filter((d) => !isNaN(d) && d >= 0);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:395:35)

  ● Performance Regression Tests › Regression Detection › should track performance trends over time

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      520 |
      521 |       // Analyze trend across runs
    > 522 |       expect(benchmarkRuns.length).toBeGreaterThan(0);
          |                                    ^
      523 |
      524 |       if (benchmarkRuns.length >= 2) {
      525 |         const firstRun = benchmarkRuns[0];

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:522:36)

  ● Performance Regression Tests › Performance Stability › should maintain consistent performance under load

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      566 |
      567 |       // Ensure we have valid results
    > 568 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      569 |       const validResults = results.filter((r) => r > 0 && !isNaN(r));
      570 |       expect(validResults.length).toBeGreaterThan(0);
      571 |

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:568:30)

FAIL src/utils/__tests__/FallbackController.test.ts (6.863 s)
  ● FallbackController › Barcode scanning › should fail gracefully when barcode scanning fails in barcode mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan returned no data"

          343 |           // Ensure we have a valid result
          344 |           if (!result) {
        > 345 |             throw new ScanError({
              |                   ^
          346 |               code: 'BARCODE_SCAN_ERROR',
          347 |               message: 'Barcode scan returned no data',
          348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.scan (src/utils/FallbackController.ts:136:18)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:175:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:177:17)

  ● FallbackController › OCR scanning › should fail gracefully when OCR scanning fails

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      200 |       mockParseOCRText.mockRejectedValueOnce(ocrError);
      201 |
    > 202 |       await expect(controller.scan(mockOCRData, 'ocr')).rejects.toThrow(
          |             ^
      203 |         'OCR parsing failed'
      204 |       );
      205 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/utils/__tests__/FallbackController.test.ts:202:13)

  ● FallbackController › Automatic fallback › should fallback to OCR when barcode scanning fails

    ScanError: Barcode scan returned no data

      343 |           // Ensure we have a valid result
      344 |           if (!result) {
    > 345 |             throw new ScanError({
          |                   ^
      346 |               code: 'BARCODE_SCAN_ERROR',
      347 |               message: 'Barcode scan returned no data',
      348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.performBarcodeScanWithFallback (src/utils/FallbackController.ts:204:22)
      at FallbackController.scan (src/utils/FallbackController.ts:146:22)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:220:22)

  ● FallbackController › Automatic fallback › should not fallback when not in auto mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan timeout"

          237 |             setTimeout(() => {
          238 |               reject(
        > 239 |                 new ScanError({
              |                 ^
          240 |                   code: 'TIMEOUT_ERROR',
          241 |                   message: 'Barcode scan timeout',
          242 |                   userMessage: 'Barcode scan took too long',

      at Timeout._onTimeout (src/utils/__tests__/FallbackController.test.ts:239:17)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:273:17)

  ● FallbackController › Progress tracking › should emit progress updates during scanning

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttempts": 1, "mode": "barcode", "state": "barcode"}
    Received
           1: {"barcodeAttempts": 0, "message": "Scanning barcode...", "mode": "barcode", "startTime": 1750865885455, "state": "barcode", "timeElapsed": 0}
           2: {"barcodeAttempts": 1, "message": "Scan completed successfully", "mode": "barcode", "startTime": 1750865885455, "state": "completed", "timeElapsed": 0}

    Number of calls: 2

      310 |       await controller.scan('test-barcode', 'barcode');
      311 |
    > 312 |       expect(events.onProgressUpdate).toHaveBeenCalledWith(
          |                                       ^
      313 |         expect.objectContaining({
      314 |           state: 'barcode',
      315 |           mode: 'barcode',

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:312:39)

  ● FallbackController › Progress tracking › should emit metrics updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttemptTime": Any<Number>, "finalMode": "barcode", "totalProcessingTime": Any<Number>}
    Received
           1: {"finalMode": "barcode", "success": true, "totalProcessingTime": 0}
           2: {"bottlenecks": [], "detailedPerformance": {"averageCpuUtilization": undefined, "averageGpuUtilization": undefined, "finalMemoryUsageMB": 101.9032855511625, "frameProcessingRate": undefined, "framesDropped": 0, "framesProcessed": 0, "initialMemoryUsageMB": 103.63724685770484, "meetsCpuTarget": true, "meetsFallbackTarget": true, "meetsMemoryTarget": true, "meetsOcrTarget": true, "memoryAllocations": 0, "memoryDeallocations": 0, "memoryDeltaMB": -1.7339613065423407, "peakCpuUtilization": undefined, "peakGpuUtilization": undefined, "peakMemoryUsageMB": 101.9032855511625, "totalProcessingTime": 1}, "modeTransitionTime": undefined, "ocrProcessingTime": undefined, "peakMemoryUsageMB": 101.9032855511625, "performanceAlerts": [], "performanceRating": "excellent", "recommendations": [], "totalProcessingTime": 1}

    Number of calls: 2

      324 |       await controller.scan('test-barcode', 'barcode');
      325 |
    > 326 |       expect(events.onMetricsUpdate).toHaveBeenCalledWith(
          |                                      ^
      327 |         expect.objectContaining({
      328 |           finalMode: 'barcode',
      329 |           barcodeAttemptTime: expect.any(Number),

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:326:38)

  ● FallbackController › Error handling › should wrap unknown errors in ScanError

    expect(received).toBe(expected) // Object.is equality

    Expected: "BARCODE_SCAN_ERROR"
    Received: "INVALID_BARCODE_FORMAT"

      383 |       } catch (error) {
      384 |         expect(error).toBeInstanceOf(ScanError);
    > 385 |         expect((error as ScanError).code).toBe('BARCODE_SCAN_ERROR');
          |                                           ^
      386 |         expect((error as ScanError).message).toBe('Barcode scanning failed');
      387 |       }
      388 |     });

      at Object.toBe (src/utils/__tests__/FallbackController.test.ts:385:43)

  ● FallbackController › Performance requirements › should complete fallback process within 4 seconds

    ScanError: Invalid barcode format

      391 |   describe('Performance requirements', () => {
      392 |     test('should complete fallback process within 4 seconds', async () => {
    > 393 |       const barcodeError = new ScanError({
          |                            ^
      394 |         code: 'INVALID_BARCODE_FORMAT',
      395 |         message: 'Invalid barcode format',
      396 |         userMessage: 'Unable to read barcode',

      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:393:28)


Test Suites: 24 failed, 10 passed, 34 total
Tests:       141 failed, 1 skipped, 235 passed, 377 total
Snapshots:   0 total
Time:        13.84 s
Ran all test suites.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
