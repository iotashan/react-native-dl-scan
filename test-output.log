watchman warning:  Recrawled this watch 55 times, most recently because:
MustScanSubDirs UserDroppedTo resolve, please review the information on
https://facebook.github.io/watchman/docs/troubleshooting.html#recrawl
To clear this warning, run:
`watchman watch-del '/Users/shan/dev/iotashan/react-native-dl-scan' ; watchman watch-project '/Users/shan/dev/iotashan/react-native-dl-scan'`

FAIL src/frameProcessors/__tests__/qualityMetrics.test.ts
  ● qualityMetrics › convertLegacyMetrics › should handle poor quality legacy metrics

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "poor"

      116 |       expect(converted.blur.status).toBe('poor');
      117 |       expect(converted.lighting.status).toBe('poor');
    > 118 |       expect(converted.positioning.status).toBe('warning');
          |                                            ^
      119 |       expect(converted.overall.readyToScan).toBe(false);
      120 |     });
      121 |

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:118:44)

  ● qualityMetrics › convertLegacyMetrics › should estimate uniformity from brightness

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.72
    Received: 0.7200000000000001

      131 |
      132 |       // Uniformity should be estimated as brightness * 0.9
    > 133 |       expect(converted.lighting.uniformity).toBe(0.72);
          |                                             ^
      134 |     });
      135 |
      136 |     it('should set document detected based on positioning', () => {

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:133:45)

FAIL src/utils/__tests__/IntelligentModeManager.test.ts
  ● IntelligentModeManager › Auto-mode session management › should start auto-mode session and setup timers

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      87 |
      88 |       expect(manager.getCurrentAutoState()).toBe(AutoModeState.INITIAL_PDF417);
    > 89 |       expect(manager.getTimeElapsed()).toBeGreaterThan(0);
         |                                        ^
      90 |       expect(manager.getTimeRemaining()).toBeLessThanOrEqual(10000);
      91 |     });
      92 |

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:89:40)

  ● IntelligentModeManager › Quality metrics processing › should trigger quality-based fallback with consistently poor quality

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      194 |       const shouldSwitch = manager.processQualityMetrics(poorMetrics);
      195 |
    > 196 |       expect(shouldSwitch).toBe(true);
          |                            ^
      197 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledWith(
      198 |         AutoModeState.INITIAL_PDF417,
      199 |         AutoModeState.SWITCHING_TO_OCR

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:196:28)

  ● IntelligentModeManager › Quality metrics processing › should calculate quality score correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      234 |       manager.processQualityMetrics(poorMetrics);
      235 |       shouldSwitch = manager.processQualityMetrics(poorMetrics);
    > 236 |       expect(shouldSwitch).toBe(true); // Should switch for poor quality
          |                            ^
      237 |     });
      238 |
      239 |     it('should maintain quality history buffer of max 5 frames', () => {

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:236:28)

  ● IntelligentModeManager › Progress information › should provide accurate progress information

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      259 |       // Immediately after start
      260 |       let progress = manager.getProgressInfo();
    > 261 |       expect(progress.timeElapsed).toBeGreaterThan(0);
          |                                    ^
      262 |       expect(progress.estimatedTimeRemaining).toBeLessThanOrEqual(10000);
      263 |       expect(progress.progressPercentage).toBeGreaterThan(0);
      264 |       expect(progress.isTransitioning).toBe(false);

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:261:36)

  ● IntelligentModeManager › Event emission › should emit all expected events during normal flow

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 4

      433 |       expect(mockEvents.onQualityAssessment).toHaveBeenCalled();
      434 |       expect(mockEvents.onWarningThresholdReached).toHaveBeenCalled();
    > 435 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledTimes(3);
          |                                                ^
      436 |       expect(mockEvents.onModeRecommendation).toHaveBeenCalled();
      437 |     });
      438 |

      at Object.toHaveBeenCalledTimes (src/utils/__tests__/IntelligentModeManager.test.ts:435:48)

FAIL src/__tests__/frame-processor-integration.test.ts
  ● Frame Processor Integration Tests › Error Handling › should handle native processing errors gracefully

    expect(received).toThrow(expected)

    Expected substring: "Native processing error"

    Received function did not throw

      337 |
      338 |       // Act & Assert
    > 339 |       expect(() => scanLicenseFrame(mockFrame)).toThrow(
          |                                                 ^
      340 |         'Native processing error'
      341 |       );
      342 |     });

      at Object.toThrow (src/__tests__/frame-processor-integration.test.ts:339:49)

  ● Frame Processor Integration Tests › Error Handling › should handle invalid frame properties

    expect(received).toBeNull()

    Received: {"data": {"firstName": "RAPID", "lastName": "TEST"}, "processingTime": 50, "success": true}

      357 |
      358 |       // Assert - Frame processor should handle invalid frames gracefully
    > 359 |       expect(result).toBeNull();
          |                      ^
      360 |     });
      361 |   });
      362 |

      at Object.toBeNull (src/__tests__/frame-processor-integration.test.ts:359:22)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame data to native processor correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"bytesPerRow": 7680, "height": 1080, "isMirrored": false, "isValid": true, "orientation": "portrait", "pixelBuffer": null, "pixelFormat": "yuv", "planarImage": true, "planesCount": 1, "timestamp": 1750870103166, "width": 1920}

    Number of calls: 0

      378 |
      379 |       // Assert
    > 380 |       expect(mockPlugin.call).toHaveBeenCalledWith(mockFrame);
          |                               ^
      381 |       expect(result).toBeDefined();
      382 |       expect(result!.success).toBe(true);
      383 |     });

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:380:31)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame metadata to native processor

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"height": 720, "orientation": "landscape", "timestamp": 1234567890, "width": 1280}

    Number of calls: 0

      410 |
      411 |       // Assert
    > 412 |       expect(mockPlugin.call).toHaveBeenCalledWith(
          |                               ^
      413 |         expect.objectContaining({
      414 |           width: 1280,
      415 |           height: 720,

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:412:31)

  ● Frame Processor Integration Tests › Multi-Frame Processing › should handle sequential frame processing

    expect(received).toBe(expected) // Object.is equality

    Expected: "HIGH"
    Received: "RAPID"

      447 |       // Assert
      448 |       expect(results[0]).toMatchObject({ success: true });
    > 449 |       expect(results[0]!.data?.firstName).toBe('HIGH');
          |                                           ^
      450 |       expect(results[1]).toMatchObject({ success: true });
      451 |       expect(results[1]!.data?.firstName).toBe('LOW');
      452 |       expect(results[2]).toBeNull();

      at Object.toBe (src/__tests__/frame-processor-integration.test.ts:449:43)

FAIL src/__tests__/QualityIndicatorPerformance.test.ts
  ● Quality Indicator Performance Tests › Frame Processing Performance › should maintain 60fps with quality metric calculations

    ReferenceError: metrics is not defined

      57 |
      58 |       // Should maintain target frame rate
    > 59 |       expect(metrics?.frameProcessingRate).toBeGreaterThanOrEqual(55); // Allow some variance
         |              ^
      60 |
      61 |       // No frames should be dropped
      62 |       expect(metrics?.framesDropped).toBe(0);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:59:14)

  ● Quality Indicator Performance Tests › Memory Performance › should not leak memory during continuous operation

    ReferenceError: metrics is not defined

      159 |
      160 |       // Memory delta should be within acceptable bounds
    > 161 |       expect(metrics?.memoryDeltaMB).toBeLessThan(10); // Less than 10MB increase
          |              ^
      162 |
      163 |       // Should meet memory target
      164 |       expect(metrics?.meetsMemoryTarget).toBe(true);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:161:14)

  ● Quality Indicator Performance Tests › Integration Performance › should maintain overall performance targets with quality system active

    ReferenceError: metrics is not defined

      306 |
      307 |       // Should meet all performance targets
    > 308 |       expect(metrics?.meetsFallbackTarget).toBe(true);
          |              ^
      309 |       expect(metrics?.meetsMemoryTarget).toBe(true);
      310 |       expect(metrics?.meetsCpuTarget).toBe(true);
      311 |

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:308:14)

FAIL src/__tests__/bridge-communication-integration.test.ts
  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle scanLicense bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "@
        ANSI 636014080000DAQ D1234567 DCSDOE DACJOHN DADQUINCY DBB01151990 DBA01152026 DBD01012020 DBC1 DAU510 DAG123 MAIN ST DAILOS ANGELES DAJCA DAK90210"

    Number of calls: 0

      64 |
      65 |       // Assert
    > 66 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(testBarcode);
         |                                            ^
      67 |       expect(result).toEqual(expectedLicenseData);
      68 |     });
      69 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:66:44)

  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle parseOCRText bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      79 |
      80 |       // Assert
    > 81 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(testOCRData);
         |                                             ^
      82 |       expect(result).toBeDefined();
      83 |     });
      84 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:81:45)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle successful promise resolution

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "HOUSTON", "postalCode": "77001", "state": "TX", "street": "456 OAK AVE"}, "dateOfBirth": 1985-03-20T00:00:00.000Z, "expirationDate": 2025-03-20T00:00:00.000Z, "firstName": "JANE", "issuerIdentificationNumber": "636015", "lastName": "SMITH", "licenseClass": "C", "licenseNumber": "TX12345678", "sex": "F"}
    Received: undefined

      119 |
      120 |       // Assert
    > 121 |       expect(result).toEqual(testData);
          |                      ^
      122 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(1);
      123 |     });
      124 |

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:121:22)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle promise rejection with proper error mapping

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      131 |       await expect(
      132 |         scanLicense(TestFixtures.barcodes.invalid.malformed)
    > 133 |       ).rejects.toThrow(ScanError);
          |                 ^
      134 |     });
      135 |
      136 |     it('should handle timeout errors appropriately', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:133:17)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle timeout errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      145 |
      146 |       // Act & Assert
    > 147 |       await expect(scanLicense('slow-barcode')).rejects.toThrow(
          |                                                         ^
      148 |         'Scanning took too long'
      149 |       );
      150 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:147:57)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should properly serialize complex license data

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "LOS ANGELES", "country": "USA", "postalCode": "90210", "state": "CA", "street": "123 MAIN ST"}, "customFields": {"additionalEndorsements": ["MOTORCYCLE", "COMMERCIAL"], "organDonor": false, "veteranStatus": true}, "dateOfBirth": 1990-01-15T00:00:00.000Z, "documentDiscriminator": "1234567890123456789012345678", "endorsements": "NONE", "expirationDate": 2026-01-15T00:00:00.000Z, "eyeColor": "BRO", "firstName": "JOHN", "hairColor": "BRN", "height": "5-10", "isOrganDonor": true, "isRealID": true, "isVeteran": false, "issueDate": 2020-01-01T00:00:00.000Z, "issuerIdentificationNumber": "636014", "lastName": "DOE", "licenseClass": "C", "licenseNumber": "D1234567", "middleName": "QUINCY", "restrictions": "NONE", "sex": "M", "weight": "180"}
    Received: undefined

      171 |
      172 |       // Assert
    > 173 |       expect(result).toEqual(complexLicenseData);
          |                      ^
      174 |       expect(result.customFields).toBeDefined();
      175 |       expect(result.customFields.additionalEndorsements).toHaveLength(2);
      176 |     });

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:173:22)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle partial data deserialization gracefully

    TypeError: Cannot read properties of undefined (reading 'firstName')

      187 |
      188 |       // Assert
    > 189 |       expect(result.firstName).toBe('INCOMPLETE');
          |                     ^
      190 |       expect(result.lastName).toBe('DATA');
      191 |       expect(result.dateOfBirth).toBeUndefined();
      192 |     });

      at Object.firstName (src/__tests__/bridge-communication-integration.test.ts:189:21)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle OCR text observation arrays correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      203 |
      204 |       // Assert
    > 205 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(
          |                                             ^
      206 |         ocrObservations
      207 |       );
      208 |       expect(Array.isArray(ocrObservations)).toBe(true);

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:205:45)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle California (CA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Texas (TX) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle New York (NY) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Florida (FL) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Washington (WA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Oregon (OR) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Arizona (AZ) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Nevada (NV) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Colorado (CO) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Utah (UT) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle rapid sequential bridge calls

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 10
    Received number of calls: 0

      269 |       // Assert
      270 |       expect(result).toHaveLength(10);
    > 271 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(10);
          |                                            ^
      272 |       expect(executionTime).toBeLessThan(2000); // Overall safety limit
      273 |     });
      274 |

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:271:44)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle concurrent bridge operations efficiently

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      305 |       expect(results).toHaveLength(3);
      306 |       expect(totalTime).toBeLessThan(500); // Concurrent calls should be faster
    > 307 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(3);
          |                                            ^
      308 |     });
      309 |
      310 |     it('should manage memory effectively during continuous operations', async () => {

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:307:44)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should recover from transient bridge communication failures

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      351 |         throw new Error('Expected first call to fail');
      352 |       } catch (error) {
    > 353 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      354 |         expect((error as ScanError).code).toBe('NETWORK_ERROR');
      355 |       }
      356 |

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:353:23)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle system-level errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      371 |
      372 |       // Act & Assert
    > 373 |       await expect(scanLicense('test-barcode')).rejects.toThrow(
          |                                                         ^
      374 |         'An unexpected error occurred'
      375 |       );
      376 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:373:57)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle permission-related errors with proper guidance

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      388 |         throw new Error('Expected permission error');
      389 |       } catch (error) {
    > 390 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      391 |         expect((error as ScanError).code).toBe('CAMERA_PERMISSION_DENIED');
      392 |         expect((error as ScanError).userMessage).toContain('camera permission');
      393 |         expect((error as ScanError).recoverable).toBe(true);

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:390:23)

  ● Bridge Communication Integration Tests › Bridge Configuration and Initialization › should configure iOS-specific bridge features

    expect(received).toBeDefined()

    Received: undefined

      419 |       () => {
      420 |         // iOS-specific bridge configuration testing
    > 421 |         expect(mockNativeModule.configureVisionFramework).toBeDefined();
          |                                                           ^
      422 |         expect(mockNativeModule.enableHapticFeedback).toBeDefined();
      423 |       }
      424 |     );

      at Object.toBeDefined (src/__tests__/bridge-communication-integration.test.ts:421:59)

FAIL src/hooks/__tests__/useThrottledQualityMetrics.test.ts
  ● useThrottledQualityMetrics › should throttle metrics updates

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": true, "score": 0.85}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      65 |
      66 |     // Metrics should not be immediately updated due to throttling
    > 67 |     expect(result.current.metrics).toBeUndefined();
         |                                    ^
      68 |
      69 |     // Fast forward time to trigger throttled update
      70 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:67:36)

  ● useThrottledQualityMetrics › should handle multiple rapid updates with throttling

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": false, "score": 0.5}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      103 |
      104 |     // Should still be undefined due to throttling
    > 105 |     expect(result.current.metrics).toBeUndefined();
          |                                    ^
      106 |
      107 |     // Advance time to process throttled update
      108 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:105:36)

FAIL e2e/errorScenarios.test.ts
  ● Error Handling Scenarios E2E › Camera Permission Denial › should handle camera permission denial gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should retry camera access after permission granted

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should provide clear guidance for permission issues

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should detect and warn about poor lighting conditions

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should continue scanning despite lighting warnings

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should auto-dismiss lighting warnings when conditions improve

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle malformed barcode data gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle wrong barcode format (non-PDF417)

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle corrupted barcode data

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle multiple consecutive scan failures

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle network connectivity issues during processing

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should offer offline processing when network is unavailable

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should queue scans for retry when network returns

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle API service unavailability

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should recover from app crashes during scanning

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should handle device memory pressure gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should provide appropriate error reporting options

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

FAIL e2e/deviceMatrix.test.ts
  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for small screens (iPhone 13 mini)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for large screens (iPhone 14 Pro Max)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should handle tablet layouts appropriately

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle portrait to landscape orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle landscape to portrait orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should maintain scan guide aspect ratio across orientations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle rapid orientation changes gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize iOS-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize Android-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should maintain acceptable performance on lower-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should optimize performance on high-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should handle memory constraints appropriately per device

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support accessibility features on all device sizes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support voice-over and screen readers

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should handle device-specific camera limitations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should adapt error messages for device capabilities

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('📱 Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

FAIL src/hooks/__tests__/useErrorHandler.test.ts
  ● useErrorHandler › handleError › should handle ScanError with camera permission denied

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      37 |         switch (scanError.code) {
      38 |           case 'CAMERA_PERMISSION_DENIED':
    > 39 |             Alert.alert(
         |                   ^
      40 |               'Camera Permission Required',
      41 |               scanError.userMessage,
      42 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:39:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:53:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:62:10)

  ● useErrorHandler › handleError › should handle detection timeout errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      59 |
      60 |           case 'DETECTION_TIMEOUT':
    > 61 |             Alert.alert(
         |                   ^
      62 |               'Scanning Timeout',
      63 |               scanError.userMessage,
      64 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:61:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:87:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:97:10)

  ● useErrorHandler › handleError › should handle system errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      79 |           case 'SYSTEM_ERROR':
      80 |           case 'VISION_ERROR':
    > 81 |             Alert.alert(
         |                   ^
      82 |               'System Error',
      83 |               scanError.userMessage,
      84 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:81:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:120:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:129:10)

  ● useErrorHandler › handleError › should handle vision framework errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      79 |           case 'SYSTEM_ERROR':
      80 |           case 'VISION_ERROR':
    > 81 |             Alert.alert(
         |                   ^
      82 |               'System Error',
      83 |               scanError.userMessage,
      84 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:81:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:147:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:156:10)

  ● useErrorHandler › handleError › should show alert for non-recoverable errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

       95 |             // For other errors, show if they're not recoverable or if error count is high
       96 |             if (!scanError.recoverable || newCount > 5) {
    >  97 |               Alert.alert(
          |                     ^
       98 |                 'Scanning Error',
       99 |                 scanError.userMessage,
      100 |                 [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:97:21)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:192:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:201:10)

  ● useErrorHandler › handleError › should show alert after multiple recoverable errors (>5)

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

       95 |             // For other errors, show if they're not recoverable or if error count is high
       96 |             if (!scanError.recoverable || newCount > 5) {
    >  97 |               Alert.alert(
          |                     ^
       98 |                 'Scanning Error',
       99 |                 scanError.userMessage,
      100 |                 [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:97:21)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:224:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:234:10)

  ● useErrorHandler › handleError › should not show alert for recoverable errors under threshold

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function alert]

      272 |
      273 |       expect(result.current.errorCount).toBe(1);
    > 274 |       expect(mockAlert).not.toHaveBeenCalled();
          |                             ^
      275 |     });
      276 |
      277 |     it('should reset error count when retry is pressed after threshold', () => {

      at Object.toHaveBeenCalled (src/hooks/__tests__/useErrorHandler.test.ts:274:29)

  ● useErrorHandler › handleError › should reset error count when retry is pressed after threshold

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

       95 |             // For other errors, show if they're not recoverable or if error count is high
       96 |             if (!scanError.recoverable || newCount > 5) {
    >  97 |               Alert.alert(
          |                     ^
       98 |                 'Scanning Error',
       99 |                 scanError.userMessage,
      100 |                 [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:97:21)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:278:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:288:10)

  ● useErrorHandler › camera permission settings integration › should open settings when Open Settings is pressed

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      37 |         switch (scanError.code) {
      38 |           case 'CAMERA_PERMISSION_DENIED':
    > 39 |             Alert.alert(
         |                   ^
      40 |               'Camera Permission Required',
      41 |               scanError.userMessage,
      42 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:39:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:340:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:349:10)

FAIL e2e/scanningFlow.test.ts
  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

PASS src/__tests__/fallback-integration.test.ts
PASS src/__tests__/OptimizationBenchmark.test.ts
PASS src/__tests__/PerformanceMonitor.unit.test.ts
PASS src/frameProcessors/__tests__/scanLicense.test.ts
PASS src/utils/__tests__/logger.test.ts
PASS src/utils/__tests__/formatters.test.ts
FAIL src/components/__tests__/ModeSelector.test.tsx
  ● ModeSelector › renders correctly with all three modes

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:21:49)

  ● ModeSelector › highlights the current mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:32:43)

  ● ModeSelector › calls onModeChange when a mode is tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:49:33)

  ● ModeSelector › provides haptic feedback on iOS when mode is selected

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:65:33)

  ● ModeSelector › announces mode changes for accessibility

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:76:33)

  ● ModeSelector › disables interaction when disabled prop is true

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:87:33)

  ● ModeSelector › shows description on long press

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:102:46)

  ● ModeSelector › maintains correct accessibility states

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:134:38)

  ● ModeSelector › cycles through modes correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:149:43)

FAIL src/components/__tests__/CameraScanner.test.tsx
  ● CameraScanner › Backward Compatibility › should maintain existing props functionality

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      56 |   onCancel,
      57 | }) => {
    > 58 |   const fadeAnim = useRef(new Animated.Value(0)).current;
         |                               ^
      59 |   const slideAnim = useRef(new Animated.Value(-100)).current;
      60 |   const progressAnim = useRef(new Animated.Value(0)).current;
      61 |

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/CameraScanner.tsx:58:31)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:130:35)

  ● CameraScanner › Permission Handling › should show permission denied UI when camera permission is denied

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      418 |       <View style={styles.container}>
      419 |         <Text style={styles.message}>Camera permission denied</Text>
    > 420 |         <TouchableOpacity
          |          ^
      421 |           style={styles.button}
      422 |           onPress={handlePermissionDenied}
      423 |         >

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/Touchable/TouchableOpacity.js:14:1)
      at Object.require [as TouchableOpacity] (node_modules/react-native/index.js:127:12)
      at TouchableOpacity (src/components/CameraScanner.tsx:420:10)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:166:35)

PASS src/hooks/__tests__/useLicenseScanner.test.ts
FAIL src/__tests__/DLScanModule.test.ts
  ● Test suite failed to run

    Cannot find module '../DLScanModule' from 'src/__tests__/DLScanModule.test.ts'

      1 | import { NativeModules } from 'react-native';
    > 2 | import DLScanModule from '../DLScanModule';
        | ^
      3 |
      4 | // Mock the native module
      5 | jest.mock('react-native', () => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/__tests__/DLScanModule.test.ts:2:1)

FAIL src/screens/__tests__/ResultScreen.test.tsx
  ● ResultScreen › Rendering › renders correctly with complete data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:90:32)

  ● ResultScreen › Rendering › renders correctly with partial data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:102:32)

  ● ResultScreen › Rendering › displays success header with scan mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:114:35)

  ● ResultScreen › Personal Information Section › displays full name correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:129:35)

  ● ResultScreen › Personal Information Section › calculates and displays age

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:141:35)

  ● ResultScreen › Personal Information Section › handles missing personal information gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:154:35)

  ● ResultScreen › Address Section › formats complete address correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:169:35)

  ● ResultScreen › Address Section › handles missing address gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:181:35)

  ● ResultScreen › License Details Section › displays license information correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:197:35)

  ● ResultScreen › License Details Section › shows expiry status for valid license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:210:35)

  ● ResultScreen › License Details Section › shows expired status for expired license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:222:35)

  ● ResultScreen › Physical Description Section › renders collapsible physical description section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:236:48)

  ● ResultScreen › Physical Description Section › expands physical description when tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:251:35)

  ● ResultScreen › Physical Description Section › hides section when no physical data available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:269:37)

  ● ResultScreen › Document Metadata Section › displays scan mode correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:283:35)

  ● ResultScreen › Document Metadata Section › displays confidence score when available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:295:35)

  ● ResultScreen › Document Metadata Section › handles missing confidence gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:307:37)

  ● ResultScreen › Action Bar › renders all action buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:322:35)

  ● ResultScreen › Action Bar › calls onRescan when Rescan button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:337:35)

  ● ResultScreen › Action Bar › calls onDone when Done button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:350:35)

  ● ResultScreen › Action Bar › calls onReportIssue when Report Issue button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:363:35)

  ● ResultScreen › Action Bar › shows alert when Report Issue is pressed without handler

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:377:35)

  ● ResultScreen › Accessibility › has proper accessibility labels for buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:396:40)

  ● ResultScreen › Accessibility › has accessibility label for collapsible section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:410:40)

  ● ResultScreen › Edge Cases › handles null/undefined data fields gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:431:35)

  ● ResultScreen › Edge Cases › handles invalid date formats gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:456:35)

FAIL src/components/__tests__/ScanningOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      4 | // Mock react-native-reanimated
      5 | jest.mock('react-native-reanimated', () => {
    > 6 |   const Reanimated = require('react-native-reanimated/mock');
        |                      ^
      7 |   Reanimated.default.call = () => {};
      8 |   return Reanimated;
      9 | });

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (src/components/__tests__/ScanningOverlay.test.tsx:6:22)
      at Object.require (src/components/ScanningOverlay.tsx:10:1)
      at Object.require (src/components/__tests__/ScanningOverlay.test.tsx:2:1)

FAIL src/__tests__/PerformanceBenchmarks.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (src/utils/FallbackController.ts:15:1)
      at Object.require (src/__tests__/PerformanceBenchmarks.test.ts:1:1)

FAIL __tests__/performance.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/performance.test.ts:36:1)

FAIL __tests__/ocr-parsing.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/ocr-parsing.test.ts:24:1)

FAIL __tests__/bridge.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/bridge.test.ts:32:1)

FAIL __tests__/integration.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/integration.test.ts:46:1)

FAIL src/__tests__/index.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (src/__tests__/index.test.tsx:17:1)

FAIL src/components/__tests__/GuidanceOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/GuidanceOverlay.tsx:3:1)
      at Object.require (src/components/__tests__/GuidanceOverlay.test.tsx:3:1)

FAIL src/components/__tests__/QualityIndicator.enhanced.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/QualityIndicator.tsx:6:1)
      at Object.require (src/components/__tests__/QualityIndicator.enhanced.test.tsx:3:1)

PASS src/__tests__/SimpleRegressionValidation.test.ts
FAIL src/__tests__/PerformanceRegression.test.ts (5.18 s)
  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for barcode scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      138 |
      139 |       // Ensure we have results
    > 140 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      141 |
      142 |       // Calculate performance statistics
      143 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:140:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for OCR scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      225 |
      226 |       // Ensure we have results
    > 227 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      228 |
      229 |       // Calculate performance statistics
      230 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:227:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for fallback processing performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      283 |
      284 |       // Ensure we have results
    > 285 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      286 |
      287 |       // Calculate performance statistics
      288 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:285:30)

  ● Performance Regression Tests › Regression Detection › should detect timing performance regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      332 |
      333 |       // Ensure we have results
    > 334 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      335 |
      336 |       // Calculate p95 timing
      337 |       const sortedTimes = results.filter((t) => t > 0).sort((a, b) => a - b);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:334:30)

  ● Performance Regression Tests › Regression Detection › should detect memory usage regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      393 |
      394 |       // Ensure we have memory data
    > 395 |       expect(memoryDeltas.length).toBeGreaterThan(0);
          |                                   ^
      396 |
      397 |       // Calculate memory usage statistics
      398 |       const validMemoryDeltas = memoryDeltas.filter((d) => !isNaN(d) && d >= 0);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:395:35)

  ● Performance Regression Tests › Regression Detection › should track performance trends over time

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      520 |
      521 |       // Analyze trend across runs
    > 522 |       expect(benchmarkRuns.length).toBeGreaterThan(0);
          |                                    ^
      523 |
      524 |       if (benchmarkRuns.length >= 2) {
      525 |         const firstRun = benchmarkRuns[0];

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:522:36)

  ● Performance Regression Tests › Performance Stability › should maintain consistent performance under load

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      566 |
      567 |       // Ensure we have valid results
    > 568 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      569 |       const validResults = results.filter((r) => r > 0 && !isNaN(r));
      570 |       expect(validResults.length).toBeGreaterThan(0);
      571 |

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:568:30)

FAIL src/utils/__tests__/FallbackController.test.ts (6.818 s)
  ● FallbackController › Barcode scanning › should fail gracefully when barcode scanning fails in barcode mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan returned no data"

          343 |           // Ensure we have a valid result
          344 |           if (!result) {
        > 345 |             throw new ScanError({
              |                   ^
          346 |               code: 'BARCODE_SCAN_ERROR',
          347 |               message: 'Barcode scan returned no data',
          348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.scan (src/utils/FallbackController.ts:136:18)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:175:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:177:17)

  ● FallbackController › OCR scanning › should fail gracefully when OCR scanning fails

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      200 |       mockParseOCRText.mockRejectedValueOnce(ocrError);
      201 |
    > 202 |       await expect(controller.scan(mockOCRData, 'ocr')).rejects.toThrow(
          |             ^
      203 |         'OCR parsing failed'
      204 |       );
      205 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/utils/__tests__/FallbackController.test.ts:202:13)

  ● FallbackController › Automatic fallback › should fallback to OCR when barcode scanning fails

    ScanError: Barcode scan returned no data

      343 |           // Ensure we have a valid result
      344 |           if (!result) {
    > 345 |             throw new ScanError({
          |                   ^
      346 |               code: 'BARCODE_SCAN_ERROR',
      347 |               message: 'Barcode scan returned no data',
      348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.performBarcodeScanWithFallback (src/utils/FallbackController.ts:204:22)
      at FallbackController.scan (src/utils/FallbackController.ts:146:22)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:220:22)

  ● FallbackController › Automatic fallback › should not fallback when not in auto mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan timeout"

          237 |             setTimeout(() => {
          238 |               reject(
        > 239 |                 new ScanError({
              |                 ^
          240 |                   code: 'TIMEOUT_ERROR',
          241 |                   message: 'Barcode scan timeout',
          242 |                   userMessage: 'Barcode scan took too long',

      at Timeout._onTimeout (src/utils/__tests__/FallbackController.test.ts:239:17)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:273:17)

  ● FallbackController › Progress tracking › should emit progress updates during scanning

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttempts": 1, "mode": "barcode", "state": "barcode"}
    Received
           1: {"barcodeAttempts": 0, "message": "Scanning barcode...", "mode": "barcode", "startTime": 1750870105552, "state": "barcode", "timeElapsed": 0}
           2: {"barcodeAttempts": 1, "message": "Scan completed successfully", "mode": "barcode", "startTime": 1750870105552, "state": "completed", "timeElapsed": 1}

    Number of calls: 2

      310 |       await controller.scan('test-barcode', 'barcode');
      311 |
    > 312 |       expect(events.onProgressUpdate).toHaveBeenCalledWith(
          |                                       ^
      313 |         expect.objectContaining({
      314 |           state: 'barcode',
      315 |           mode: 'barcode',

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:312:39)

  ● FallbackController › Progress tracking › should emit metrics updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttemptTime": Any<Number>, "finalMode": "barcode", "totalProcessingTime": Any<Number>}
    Received
           1: {"finalMode": "barcode", "success": true, "totalProcessingTime": 0}
           2: {"bottlenecks": [], "detailedPerformance": {"averageCpuUtilization": undefined, "averageGpuUtilization": undefined, "finalMemoryUsageMB": 143.10629367110994, "frameProcessingRate": undefined, "framesDropped": 0, "framesProcessed": 0, "initialMemoryUsageMB": 129.87472085523098, "meetsCpuTarget": true, "meetsFallbackTarget": true, "meetsMemoryTarget": true, "meetsOcrTarget": true, "memoryAllocations": 0, "memoryDeallocations": 0, "memoryDeltaMB": 13.231572815878963, "peakCpuUtilization": undefined, "peakGpuUtilization": undefined, "peakMemoryUsageMB": 143.10629367110994, "totalProcessingTime": 0}, "modeTransitionTime": undefined, "ocrProcessingTime": undefined, "peakMemoryUsageMB": 143.10629367110994, "performanceAlerts": [], "performanceRating": "excellent", "recommendations": [], "totalProcessingTime": 0}

    Number of calls: 2

      324 |       await controller.scan('test-barcode', 'barcode');
      325 |
    > 326 |       expect(events.onMetricsUpdate).toHaveBeenCalledWith(
          |                                      ^
      327 |         expect.objectContaining({
      328 |           finalMode: 'barcode',
      329 |           barcodeAttemptTime: expect.any(Number),

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:326:38)

  ● FallbackController › Error handling › should wrap unknown errors in ScanError

    expect(received).toBe(expected) // Object.is equality

    Expected: "BARCODE_SCAN_ERROR"
    Received: "INVALID_BARCODE_FORMAT"

      383 |       } catch (error) {
      384 |         expect(error).toBeInstanceOf(ScanError);
    > 385 |         expect((error as ScanError).code).toBe('BARCODE_SCAN_ERROR');
          |                                           ^
      386 |         expect((error as ScanError).message).toBe('Barcode scanning failed');
      387 |       }
      388 |     });

      at Object.toBe (src/utils/__tests__/FallbackController.test.ts:385:43)

  ● FallbackController › Performance requirements › should complete fallback process within 4 seconds

    ScanError: Invalid barcode format

      391 |   describe('Performance requirements', () => {
      392 |     test('should complete fallback process within 4 seconds', async () => {
    > 393 |       const barcodeError = new ScanError({
          |                            ^
      394 |         code: 'INVALID_BARCODE_FORMAT',
      395 |         message: 'Invalid barcode format',
      396 |         userMessage: 'Unable to read barcode',

      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:393:28)

PASS src/utils/__tests__/FallbackController.memory.test.ts (11.914 s)
A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.

Summary of all failing tests
FAIL src/frameProcessors/__tests__/qualityMetrics.test.ts
  ● qualityMetrics › convertLegacyMetrics › should handle poor quality legacy metrics

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "poor"

      116 |       expect(converted.blur.status).toBe('poor');
      117 |       expect(converted.lighting.status).toBe('poor');
    > 118 |       expect(converted.positioning.status).toBe('warning');
          |                                            ^
      119 |       expect(converted.overall.readyToScan).toBe(false);
      120 |     });
      121 |

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:118:44)

  ● qualityMetrics › convertLegacyMetrics › should estimate uniformity from brightness

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.72
    Received: 0.7200000000000001

      131 |
      132 |       // Uniformity should be estimated as brightness * 0.9
    > 133 |       expect(converted.lighting.uniformity).toBe(0.72);
          |                                             ^
      134 |     });
      135 |
      136 |     it('should set document detected based on positioning', () => {

      at Object.toBe (src/frameProcessors/__tests__/qualityMetrics.test.ts:133:45)

FAIL src/utils/__tests__/IntelligentModeManager.test.ts
  ● IntelligentModeManager › Auto-mode session management › should start auto-mode session and setup timers

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      87 |
      88 |       expect(manager.getCurrentAutoState()).toBe(AutoModeState.INITIAL_PDF417);
    > 89 |       expect(manager.getTimeElapsed()).toBeGreaterThan(0);
         |                                        ^
      90 |       expect(manager.getTimeRemaining()).toBeLessThanOrEqual(10000);
      91 |     });
      92 |

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:89:40)

  ● IntelligentModeManager › Quality metrics processing › should trigger quality-based fallback with consistently poor quality

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      194 |       const shouldSwitch = manager.processQualityMetrics(poorMetrics);
      195 |
    > 196 |       expect(shouldSwitch).toBe(true);
          |                            ^
      197 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledWith(
      198 |         AutoModeState.INITIAL_PDF417,
      199 |         AutoModeState.SWITCHING_TO_OCR

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:196:28)

  ● IntelligentModeManager › Quality metrics processing › should calculate quality score correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      234 |       manager.processQualityMetrics(poorMetrics);
      235 |       shouldSwitch = manager.processQualityMetrics(poorMetrics);
    > 236 |       expect(shouldSwitch).toBe(true); // Should switch for poor quality
          |                            ^
      237 |     });
      238 |
      239 |     it('should maintain quality history buffer of max 5 frames', () => {

      at Object.toBe (src/utils/__tests__/IntelligentModeManager.test.ts:236:28)

  ● IntelligentModeManager › Progress information › should provide accurate progress information

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      259 |       // Immediately after start
      260 |       let progress = manager.getProgressInfo();
    > 261 |       expect(progress.timeElapsed).toBeGreaterThan(0);
          |                                    ^
      262 |       expect(progress.estimatedTimeRemaining).toBeLessThanOrEqual(10000);
      263 |       expect(progress.progressPercentage).toBeGreaterThan(0);
      264 |       expect(progress.isTransitioning).toBe(false);

      at Object.toBeGreaterThan (src/utils/__tests__/IntelligentModeManager.test.ts:261:36)

  ● IntelligentModeManager › Event emission › should emit all expected events during normal flow

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 4

      433 |       expect(mockEvents.onQualityAssessment).toHaveBeenCalled();
      434 |       expect(mockEvents.onWarningThresholdReached).toHaveBeenCalled();
    > 435 |       expect(mockEvents.onAutoModeStateChange).toHaveBeenCalledTimes(3);
          |                                                ^
      436 |       expect(mockEvents.onModeRecommendation).toHaveBeenCalled();
      437 |     });
      438 |

      at Object.toHaveBeenCalledTimes (src/utils/__tests__/IntelligentModeManager.test.ts:435:48)

FAIL src/__tests__/frame-processor-integration.test.ts
  ● Frame Processor Integration Tests › Error Handling › should handle native processing errors gracefully

    expect(received).toThrow(expected)

    Expected substring: "Native processing error"

    Received function did not throw

      337 |
      338 |       // Act & Assert
    > 339 |       expect(() => scanLicenseFrame(mockFrame)).toThrow(
          |                                                 ^
      340 |         'Native processing error'
      341 |       );
      342 |     });

      at Object.toThrow (src/__tests__/frame-processor-integration.test.ts:339:49)

  ● Frame Processor Integration Tests › Error Handling › should handle invalid frame properties

    expect(received).toBeNull()

    Received: {"data": {"firstName": "RAPID", "lastName": "TEST"}, "processingTime": 50, "success": true}

      357 |
      358 |       // Assert - Frame processor should handle invalid frames gracefully
    > 359 |       expect(result).toBeNull();
          |                      ^
      360 |     });
      361 |   });
      362 |

      at Object.toBeNull (src/__tests__/frame-processor-integration.test.ts:359:22)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame data to native processor correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"bytesPerRow": 7680, "height": 1080, "isMirrored": false, "isValid": true, "orientation": "portrait", "pixelBuffer": null, "pixelFormat": "yuv", "planarImage": true, "planesCount": 1, "timestamp": 1750870103166, "width": 1920}

    Number of calls: 0

      378 |
      379 |       // Assert
    > 380 |       expect(mockPlugin.call).toHaveBeenCalledWith(mockFrame);
          |                               ^
      381 |       expect(result).toBeDefined();
      382 |       expect(result!.success).toBe(true);
      383 |     });

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:380:31)

  ● Frame Processor Integration Tests › Frame Processor Configuration › should pass frame metadata to native processor

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"height": 720, "orientation": "landscape", "timestamp": 1234567890, "width": 1280}

    Number of calls: 0

      410 |
      411 |       // Assert
    > 412 |       expect(mockPlugin.call).toHaveBeenCalledWith(
          |                               ^
      413 |         expect.objectContaining({
      414 |           width: 1280,
      415 |           height: 720,

      at Object.toHaveBeenCalledWith (src/__tests__/frame-processor-integration.test.ts:412:31)

  ● Frame Processor Integration Tests › Multi-Frame Processing › should handle sequential frame processing

    expect(received).toBe(expected) // Object.is equality

    Expected: "HIGH"
    Received: "RAPID"

      447 |       // Assert
      448 |       expect(results[0]).toMatchObject({ success: true });
    > 449 |       expect(results[0]!.data?.firstName).toBe('HIGH');
          |                                           ^
      450 |       expect(results[1]).toMatchObject({ success: true });
      451 |       expect(results[1]!.data?.firstName).toBe('LOW');
      452 |       expect(results[2]).toBeNull();

      at Object.toBe (src/__tests__/frame-processor-integration.test.ts:449:43)

FAIL src/__tests__/QualityIndicatorPerformance.test.ts
  ● Quality Indicator Performance Tests › Frame Processing Performance › should maintain 60fps with quality metric calculations

    ReferenceError: metrics is not defined

      57 |
      58 |       // Should maintain target frame rate
    > 59 |       expect(metrics?.frameProcessingRate).toBeGreaterThanOrEqual(55); // Allow some variance
         |              ^
      60 |
      61 |       // No frames should be dropped
      62 |       expect(metrics?.framesDropped).toBe(0);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:59:14)

  ● Quality Indicator Performance Tests › Memory Performance › should not leak memory during continuous operation

    ReferenceError: metrics is not defined

      159 |
      160 |       // Memory delta should be within acceptable bounds
    > 161 |       expect(metrics?.memoryDeltaMB).toBeLessThan(10); // Less than 10MB increase
          |              ^
      162 |
      163 |       // Should meet memory target
      164 |       expect(metrics?.meetsMemoryTarget).toBe(true);

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:161:14)

  ● Quality Indicator Performance Tests › Integration Performance › should maintain overall performance targets with quality system active

    ReferenceError: metrics is not defined

      306 |
      307 |       // Should meet all performance targets
    > 308 |       expect(metrics?.meetsFallbackTarget).toBe(true);
          |              ^
      309 |       expect(metrics?.meetsMemoryTarget).toBe(true);
      310 |       expect(metrics?.meetsCpuTarget).toBe(true);
      311 |

      at Object.metrics (src/__tests__/QualityIndicatorPerformance.test.ts:308:14)

FAIL src/__tests__/bridge-communication-integration.test.ts
  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle scanLicense bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "@
        ANSI 636014080000DAQ D1234567 DCSDOE DACJOHN DADQUINCY DBB01151990 DBA01152026 DBD01012020 DBC1 DAU510 DAG123 MAIN ST DAILOS ANGELES DAJCA DAK90210"

    Number of calls: 0

      64 |
      65 |       // Assert
    > 66 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(testBarcode);
         |                                            ^
      67 |       expect(result).toEqual(expectedLicenseData);
      68 |     });
      69 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:66:44)

  ● Bridge Communication Integration Tests › Native Module Method Invocation › should handle parseOCRText bridge communication correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      79 |
      80 |       // Assert
    > 81 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(testOCRData);
         |                                             ^
      82 |       expect(result).toBeDefined();
      83 |     });
      84 |

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:81:45)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle successful promise resolution

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "HOUSTON", "postalCode": "77001", "state": "TX", "street": "456 OAK AVE"}, "dateOfBirth": 1985-03-20T00:00:00.000Z, "expirationDate": 2025-03-20T00:00:00.000Z, "firstName": "JANE", "issuerIdentificationNumber": "636015", "lastName": "SMITH", "licenseClass": "C", "licenseNumber": "TX12345678", "sex": "F"}
    Received: undefined

      119 |
      120 |       // Assert
    > 121 |       expect(result).toEqual(testData);
          |                      ^
      122 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(1);
      123 |     });
      124 |

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:121:22)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle promise rejection with proper error mapping

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      131 |       await expect(
      132 |         scanLicense(TestFixtures.barcodes.invalid.malformed)
    > 133 |       ).rejects.toThrow(ScanError);
          |                 ^
      134 |     });
      135 |
      136 |     it('should handle timeout errors appropriately', async () => {

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:133:17)

  ● Bridge Communication Integration Tests › Promise and Callback Handling › should handle timeout errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      145 |
      146 |       // Act & Assert
    > 147 |       await expect(scanLicense('slow-barcode')).rejects.toThrow(
          |                                                         ^
      148 |         'Scanning took too long'
      149 |       );
      150 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:147:57)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should properly serialize complex license data

    expect(received).toEqual(expected) // deep equality

    Expected: {"address": {"city": "LOS ANGELES", "country": "USA", "postalCode": "90210", "state": "CA", "street": "123 MAIN ST"}, "customFields": {"additionalEndorsements": ["MOTORCYCLE", "COMMERCIAL"], "organDonor": false, "veteranStatus": true}, "dateOfBirth": 1990-01-15T00:00:00.000Z, "documentDiscriminator": "1234567890123456789012345678", "endorsements": "NONE", "expirationDate": 2026-01-15T00:00:00.000Z, "eyeColor": "BRO", "firstName": "JOHN", "hairColor": "BRN", "height": "5-10", "isOrganDonor": true, "isRealID": true, "isVeteran": false, "issueDate": 2020-01-01T00:00:00.000Z, "issuerIdentificationNumber": "636014", "lastName": "DOE", "licenseClass": "C", "licenseNumber": "D1234567", "middleName": "QUINCY", "restrictions": "NONE", "sex": "M", "weight": "180"}
    Received: undefined

      171 |
      172 |       // Assert
    > 173 |       expect(result).toEqual(complexLicenseData);
          |                      ^
      174 |       expect(result.customFields).toBeDefined();
      175 |       expect(result.customFields.additionalEndorsements).toHaveLength(2);
      176 |     });

      at Object.toEqual (src/__tests__/bridge-communication-integration.test.ts:173:22)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle partial data deserialization gracefully

    TypeError: Cannot read properties of undefined (reading 'firstName')

      187 |
      188 |       // Assert
    > 189 |       expect(result.firstName).toBe('INCOMPLETE');
          |                     ^
      190 |       expect(result.lastName).toBe('DATA');
      191 |       expect(result.dateOfBirth).toBeUndefined();
      192 |     });

      at Object.firstName (src/__tests__/bridge-communication-integration.test.ts:189:21)

  ● Bridge Communication Integration Tests › Data Serialization and Deserialization › should handle OCR text observation arrays correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"boundingBox": {"height": 25, "width": 200, "x": 50, "y": 20}, "confidence": 0.98, "text": "DRIVER LICENSE"}, {"boundingBox": {"height": 25, "width": 120, "x": 260, "y": 20}, "confidence": 0.97, "text": "CALIFORNIA"}, {"boundingBox": {"height": 30, "width": 150, "x": 50, "y": 80}, "confidence": 0.96, "text": "DOE, JOHN"}, {"boundingBox": {"height": 25, "width": 100, "x": 250, "y": 110}, "confidence": 0.94, "text": "D1234567"}, {"boundingBox": {"height": 20, "width": 130, "x": 50, "y": 140}, "confidence": 0.92, "text": "DOB 01/15/1990"}, {"boundingBox": {"height": 20, "width": 130, "x": 200, "y": 140}, "confidence": 0.91, "text": "EXP 01/15/2026"}]

    Number of calls: 0

      203 |
      204 |       // Assert
    > 205 |       expect(mockNativeModule.parseOCRText).toHaveBeenCalledWith(
          |                                             ^
      206 |         ocrObservations
      207 |       );
      208 |       expect(Array.isArray(ocrObservations)).toBe(true);

      at Object.toHaveBeenCalledWith (src/__tests__/bridge-communication-integration.test.ts:205:45)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle California (CA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Texas (TX) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle New York (NY) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Florida (FL) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Washington (WA) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Oregon (OR) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Arizona (AZ) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Nevada (NV) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Colorado (CO) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Multi-State License Support › should handle Utah (UT) license processing via bridge

    TypeError: Cannot read properties of undefined (reading 'address')

      238 |
      239 |         // Assert
    > 240 |         expect(result.address?.state).toBe(state.code);
          |                       ^
      241 |         expect(result.issuerIdentificationNumber).toBe(state.iin);
      242 |         expect(mockNativeModule.scanLicense).toHaveBeenCalledWith(stateBarcode);
      243 |       });

      at Object.address (src/__tests__/bridge-communication-integration.test.ts:240:23)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle rapid sequential bridge calls

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 10
    Received number of calls: 0

      269 |       // Assert
      270 |       expect(result).toHaveLength(10);
    > 271 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(10);
          |                                            ^
      272 |       expect(executionTime).toBeLessThan(2000); // Overall safety limit
      273 |     });
      274 |

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:271:44)

  ● Bridge Communication Integration Tests › Performance and Load Testing › should handle concurrent bridge operations efficiently

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      305 |       expect(results).toHaveLength(3);
      306 |       expect(totalTime).toBeLessThan(500); // Concurrent calls should be faster
    > 307 |       expect(mockNativeModule.scanLicense).toHaveBeenCalledTimes(3);
          |                                            ^
      308 |     });
      309 |
      310 |     it('should manage memory effectively during continuous operations', async () => {

      at Object.toHaveBeenCalledTimes (src/__tests__/bridge-communication-integration.test.ts:307:44)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should recover from transient bridge communication failures

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      351 |         throw new Error('Expected first call to fail');
      352 |       } catch (error) {
    > 353 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      354 |         expect((error as ScanError).code).toBe('NETWORK_ERROR');
      355 |       }
      356 |

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:353:23)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle system-level errors appropriately

    expect(received).rejects.toThrow()

    Matcher error: received value must be a promise or a function returning a promise

    Received has value: undefined

      371 |
      372 |       // Act & Assert
    > 373 |       await expect(scanLicense('test-barcode')).rejects.toThrow(
          |                                                         ^
      374 |         'An unexpected error occurred'
      375 |       );
      376 |     });

      at Object.toThrow (node_modules/expect/build/index.js:204:13)
      at Object.toThrow (src/__tests__/bridge-communication-integration.test.ts:373:57)

  ● Bridge Communication Integration Tests › Error Recovery and Resilience › should handle permission-related errors with proper guidance

    expect(received).toBeInstanceOf(expected)

    Expected constructor: MockScanError
    Received constructor: Error

      388 |         throw new Error('Expected permission error');
      389 |       } catch (error) {
    > 390 |         expect(error).toBeInstanceOf(ScanError);
          |                       ^
      391 |         expect((error as ScanError).code).toBe('CAMERA_PERMISSION_DENIED');
      392 |         expect((error as ScanError).userMessage).toContain('camera permission');
      393 |         expect((error as ScanError).recoverable).toBe(true);

      at Object.toBeInstanceOf (src/__tests__/bridge-communication-integration.test.ts:390:23)

  ● Bridge Communication Integration Tests › Bridge Configuration and Initialization › should configure iOS-specific bridge features

    expect(received).toBeDefined()

    Received: undefined

      419 |       () => {
      420 |         // iOS-specific bridge configuration testing
    > 421 |         expect(mockNativeModule.configureVisionFramework).toBeDefined();
          |                                                           ^
      422 |         expect(mockNativeModule.enableHapticFeedback).toBeDefined();
      423 |       }
      424 |     );

      at Object.toBeDefined (src/__tests__/bridge-communication-integration.test.ts:421:59)

FAIL src/hooks/__tests__/useThrottledQualityMetrics.test.ts
  ● useThrottledQualityMetrics › should throttle metrics updates

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": true, "score": 0.85}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      65 |
      66 |     // Metrics should not be immediately updated due to throttling
    > 67 |     expect(result.current.metrics).toBeUndefined();
         |                                    ^
      68 |
      69 |     // Fast forward time to trigger throttled update
      70 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:67:36)

  ● useThrottledQualityMetrics › should handle multiple rapid updates with throttling

    expect(received).toBeUndefined()

    Received: {"blur": {"status": "good", "value": 0.2}, "lighting": {"brightness": 0.8, "status": "good", "uniformity": 0.9}, "overall": {"readyToScan": false, "score": 0.5}, "positioning": {"alignment": 0.85, "distance": "optimal", "documentDetected": true, "status": "good"}}

      103 |
      104 |     // Should still be undefined due to throttling
    > 105 |     expect(result.current.metrics).toBeUndefined();
          |                                    ^
      106 |
      107 |     // Advance time to process throttled update
      108 |     act(() => {

      at Object.toBeUndefined (src/hooks/__tests__/useThrottledQualityMetrics.test.ts:105:36)

FAIL e2e/errorScenarios.test.ts
  ● Error Handling Scenarios E2E › Camera Permission Denial › should handle camera permission denial gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should retry camera access after permission granted

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Camera Permission Denial › should provide clear guidance for permission issues

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should detect and warn about poor lighting conditions

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should continue scanning despite lighting warnings

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Poor Lighting Conditions › should auto-dismiss lighting warnings when conditions improve

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle malformed barcode data gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle wrong barcode format (non-PDF417)

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle corrupted barcode data

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Invalid Barcode Handling › should handle multiple consecutive scan failures

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle network connectivity issues during processing

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should offer offline processing when network is unavailable

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should queue scans for retry when network returns

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › Network Failure Scenarios › should handle API service unavailability

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should recover from app crashes during scanning

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should handle device memory pressure gracefully

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

  ● Error Handling Scenarios E2E › System-Level Error Recovery › should provide appropriate error reporting options

    ReferenceError: TestUtils is not defined

      12 |
      13 |   beforeEach(async () => {
    > 14 |     await TestUtils.takeTestScreenshot('error-test-start');
         |     ^
      15 |   });
      16 |
      17 |   afterEach(async () => {

      at Object.<anonymous> (e2e/errorScenarios.test.ts:14:5)

FAIL e2e/deviceMatrix.test.ts
  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for small screens (iPhone 13 mini)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should adapt UI layout for large screens (iPhone 14 Pro Max)

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Screen Size Adaptation › should handle tablet layouts appropriately

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle portrait to landscape orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle landscape to portrait orientation change

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should maintain scan guide aspect ratio across orientations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Orientation Support › should handle rapid orientation changes gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize iOS-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Platform-Specific Features › should utilize Android-specific features when available

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should maintain acceptable performance on lower-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should optimize performance on high-end devices

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Performance Across Devices › should handle memory constraints appropriately per device

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support accessibility features on all device sizes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Accessibility Across Device Matrix › should support voice-over and screen readers

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should handle device-specific camera limitations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

  ● Device Matrix E2E Tests › Device-Specific Error Handling › should adapt error messages for device capabilities

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      83 |   beforeAll(async () => {
      84 |     console.log('�� Starting Device Matrix E2E Tests');
    > 85 |     console.log(`Current platform: ${device.getPlatform()}`);
         |                                             ^
      86 |   });
      87 |
      88 |   beforeEach(async () => {

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.getPlatform (e2e/deviceMatrix.test.ts:85:45)

FAIL src/hooks/__tests__/useErrorHandler.test.ts
  ● useErrorHandler › handleError › should handle ScanError with camera permission denied

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      37 |         switch (scanError.code) {
      38 |           case 'CAMERA_PERMISSION_DENIED':
    > 39 |             Alert.alert(
         |                   ^
      40 |               'Camera Permission Required',
      41 |               scanError.userMessage,
      42 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:39:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:53:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:62:10)

  ● useErrorHandler › handleError › should handle detection timeout errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      59 |
      60 |           case 'DETECTION_TIMEOUT':
    > 61 |             Alert.alert(
         |                   ^
      62 |               'Scanning Timeout',
      63 |               scanError.userMessage,
      64 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:61:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:87:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:97:10)

  ● useErrorHandler › handleError › should handle system errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      79 |           case 'SYSTEM_ERROR':
      80 |           case 'VISION_ERROR':
    > 81 |             Alert.alert(
         |                   ^
      82 |               'System Error',
      83 |               scanError.userMessage,
      84 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:81:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:120:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:129:10)

  ● useErrorHandler › handleError › should handle vision framework errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      79 |           case 'SYSTEM_ERROR':
      80 |           case 'VISION_ERROR':
    > 81 |             Alert.alert(
         |                   ^
      82 |               'System Error',
      83 |               scanError.userMessage,
      84 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:81:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:147:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:156:10)

  ● useErrorHandler › handleError › should show alert for non-recoverable errors

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

       95 |             // For other errors, show if they're not recoverable or if error count is high
       96 |             if (!scanError.recoverable || newCount > 5) {
    >  97 |               Alert.alert(
          |                     ^
       98 |                 'Scanning Error',
       99 |                 scanError.userMessage,
      100 |                 [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:97:21)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:192:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:201:10)

  ● useErrorHandler › handleError › should show alert after multiple recoverable errors (>5)

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

       95 |             // For other errors, show if they're not recoverable or if error count is high
       96 |             if (!scanError.recoverable || newCount > 5) {
    >  97 |               Alert.alert(
          |                     ^
       98 |                 'Scanning Error',
       99 |                 scanError.userMessage,
      100 |                 [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:97:21)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:224:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:234:10)

  ● useErrorHandler › handleError › should not show alert for recoverable errors under threshold

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function alert]

      272 |
      273 |       expect(result.current.errorCount).toBe(1);
    > 274 |       expect(mockAlert).not.toHaveBeenCalled();
          |                             ^
      275 |     });
      276 |
      277 |     it('should reset error count when retry is pressed after threshold', () => {

      at Object.toHaveBeenCalled (src/hooks/__tests__/useErrorHandler.test.ts:274:29)

  ● useErrorHandler › handleError › should reset error count when retry is pressed after threshold

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

       95 |             // For other errors, show if they're not recoverable or if error count is high
       96 |             if (!scanError.recoverable || newCount > 5) {
    >  97 |               Alert.alert(
          |                     ^
       98 |                 'Scanning Error',
       99 |                 scanError.userMessage,
      100 |                 [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:97:21)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:278:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:288:10)

  ● useErrorHandler › camera permission settings integration › should open settings when Open Settings is pressed

    TypeError: _NativeAlertManager.default.alertWithArgs is not a function

      37 |         switch (scanError.code) {
      38 |           case 'CAMERA_PERMISSION_DENIED':
    > 39 |             Alert.alert(
         |                   ^
      40 |               'Camera Permission Required',
      41 |               scanError.userMessage,
      42 |               [

      at Object.alertWithArgs (node_modules/react-native/Libraries/Alert/RCTAlertManager.ios.js:23:24)
      at Function.alertWithArgs [as prompt] (node_modules/react-native/Libraries/Alert/Alert.js:178:23)
      at Function.prompt [as alert] (node_modules/react-native/Libraries/Alert/Alert.js:70:13)
      at alert (src/hooks/useErrorHandler.ts:39:19)
      at basicStateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3874:45)
      at updateReducerImpl (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3985:17)
      at updateReducer (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3907:14)
      at Object.useState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:13245:18)
      at Object.<anonymous>.process.env.NODE_ENV.exports.useState (node_modules/react/cjs/react.development.js:1500:34)
      at useErrorHandler (src/hooks/useErrorHandler.ts:12:47)
      at src/hooks/__tests__/useErrorHandler.test.ts:340:58
      at hookToRender (node_modules/@testing-library/react-native/src/render-hook.tsx:40:26)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at Object.<anonymous> (src/hooks/__tests__/useErrorHandler.test.ts:349:10)

FAIL e2e/scanningFlow.test.ts
  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should complete PDF417 scanning successfully with California license

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should handle Texas license PDF417 scanning

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › PDF417 Barcode Scanning Happy Path › should show scanning progress and processing indicators

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should activate OCR fallback when PDF417 scanning times out

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › OCR Fallback Activation › should complete OCR scanning workflow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should allow manual switch between PDF417 and OCR modes

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Mode Switching Behaviors › should maintain scanning state during mode switches

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle PDF417 scanning timeout gracefully

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should handle OCR scanning timeout with retry options

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Scanning Timeout Scenarios › should provide helpful timeout guidance to users

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should provide clear scanning instructions throughout the flow

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › User Experience and Navigation › should allow users to cancel scanning and return to main screen

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should start scanning within acceptable time limits

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should process scan results within performance requirements

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    ReferenceError: TestUtils is not defined

      15 |   beforeEach(async () => {
      16 |     // Additional setup for each test if needed
    > 17 |     await TestUtils.takeTestScreenshot('test-start');
         |     ^
      18 |   });
      19 |
      20 |   afterEach(async () => {

      at Object.<anonymous> (e2e/scanningFlow.test.ts:17:5)

  ● Driver License Scanning Flow E2E › Performance and Responsiveness › should maintain responsive UI during scanning operations

    DetoxRuntimeError: Detox worker instance has not been installed in this context (DetoxPrimaryContext).

    HINT: If you are using Detox with Jest according to the latest guide, please report this issue on our GitHub tracker:
    https://github.com/wix/Detox/issues
    Otherwise, make sure you call detox.installWorker() beforehand.

      24 |     } catch (error) {
      25 |       // Back button might not be visible, try home navigation
    > 26 |       await device.pressBack(); // Android
         |                    ^
      27 |     }
      28 |   });
      29 |

      at DetoxPrimaryContext.get [worker] (node_modules/detox/src/realms/DetoxContext.js:135:13)
      at node_modules/detox/src/realms/DetoxContext.js:72:36
      at getter (node_modules/funpermaproxy/lib/permaproxy.js:10:24)
      at Object.get (node_modules/funpermaproxy/lib/permaproxy.js:21:22)
      at Object.pressBack (e2e/scanningFlow.test.ts:26:20)

FAIL src/components/__tests__/ModeSelector.test.tsx
  ● ModeSelector › renders correctly with all three modes

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:21:49)

  ● ModeSelector › highlights the current mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:32:43)

  ● ModeSelector › calls onModeChange when a mode is tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:49:33)

  ● ModeSelector › provides haptic feedback on iOS when mode is selected

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:65:33)

  ● ModeSelector › announces mode changes for accessibility

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:76:33)

  ● ModeSelector › disables interaction when disabled prop is true

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:87:33)

  ● ModeSelector › shows description on long press

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:102:46)

  ● ModeSelector › maintains correct accessibility states

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:134:38)

  ● ModeSelector › cycles through modes correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      255 |   timeRemaining,
      256 | }) => {
    > 257 |   const translateX = useRef(new Animated.Value(0)).current;
          |                                 ^
      258 |   const scaleAnim = useRef(new Animated.Value(1)).current;
      259 |   const fadeAnim = useRef(new Animated.Value(1)).current;
      260 |   const [showDescription, setShowDescription] = useState(false);

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/ModeSelector.tsx:257:33)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/ModeSelector.test.tsx:149:43)

FAIL src/components/__tests__/CameraScanner.test.tsx
  ● CameraScanner › Backward Compatibility › should maintain existing props functionality

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      56 |   onCancel,
      57 | }) => {
    > 58 |   const fadeAnim = useRef(new Animated.Value(0)).current;
         |                               ^
      59 |   const slideAnim = useRef(new Animated.Value(-100)).current;
      60 |   const progressAnim = useRef(new Animated.Value(0)).current;
      61 |

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require [as Animated] (node_modules/react-native/index.js:153:12)
      at Animated (src/components/CameraScanner.tsx:58:31)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:130:35)

  ● CameraScanner › Permission Handling › should show permission denied UI when camera permission is denied

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      418 |       <View style={styles.container}>
      419 |         <Text style={styles.message}>Camera permission denied</Text>
    > 420 |         <TouchableOpacity
          |          ^
      421 |           style={styles.button}
      422 |           onPress={handlePermissionDenied}
      423 |         >

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/Touchable/TouchableOpacity.js:14:1)
      at Object.require [as TouchableOpacity] (node_modules/react-native/index.js:127:12)
      at TouchableOpacity (src/components/CameraScanner.tsx:420:10)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/components/__tests__/CameraScanner.test.tsx:166:35)

FAIL src/__tests__/DLScanModule.test.ts
  ● Test suite failed to run

    Cannot find module '../DLScanModule' from 'src/__tests__/DLScanModule.test.ts'

      1 | import { NativeModules } from 'react-native';
    > 2 | import DLScanModule from '../DLScanModule';
        | ^
      3 |
      4 | // Mock the native module
      5 | jest.mock('react-native', () => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (src/__tests__/DLScanModule.test.ts:2:1)

FAIL src/screens/__tests__/ResultScreen.test.tsx
  ● ResultScreen › Rendering › renders correctly with complete data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:90:32)

  ● ResultScreen › Rendering › renders correctly with partial data

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:102:32)

  ● ResultScreen › Rendering › displays success header with scan mode

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:114:35)

  ● ResultScreen › Personal Information Section › displays full name correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:129:35)

  ● ResultScreen › Personal Information Section › calculates and displays age

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:141:35)

  ● ResultScreen › Personal Information Section › handles missing personal information gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:154:35)

  ● ResultScreen › Address Section › formats complete address correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:169:35)

  ● ResultScreen › Address Section › handles missing address gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:181:35)

  ● ResultScreen › License Details Section › displays license information correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:197:35)

  ● ResultScreen › License Details Section › shows expiry status for valid license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:210:35)

  ● ResultScreen › License Details Section › shows expired status for expired license

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:222:35)

  ● ResultScreen › Physical Description Section › renders collapsible physical description section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:236:48)

  ● ResultScreen › Physical Description Section › expands physical description when tapped

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:251:35)

  ● ResultScreen › Physical Description Section › hides section when no physical data available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:269:37)

  ● ResultScreen › Document Metadata Section › displays scan mode correctly

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:283:35)

  ● ResultScreen › Document Metadata Section › displays confidence score when available

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:295:35)

  ● ResultScreen › Document Metadata Section › handles missing confidence gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:307:37)

  ● ResultScreen › Action Bar › renders all action buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:322:35)

  ● ResultScreen › Action Bar › calls onRescan when Rescan button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:337:35)

  ● ResultScreen › Action Bar › calls onDone when Done button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:350:35)

  ● ResultScreen › Action Bar › calls onReportIssue when Report Issue button is pressed

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:363:35)

  ● ResultScreen › Action Bar › shows alert when Report Issue is pressed without handler

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:377:35)

  ● ResultScreen › Accessibility › has proper accessibility labels for buttons

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:396:40)

  ● ResultScreen › Accessibility › has accessibility label for collapsible section

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:410:40)

  ● ResultScreen › Edge Cases › handles null/undefined data fields gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:431:35)

  ● ResultScreen › Edge Cases › handles invalid date formats gracefully

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      281 |
      282 |       {/* Scrollable Content */}
    > 283 |       <ScrollView
          |        ^
      284 |         style={styles.content}
      285 |         contentContainerStyle={styles.contentContainer}
      286 |         showsVerticalScrollIndicator={false}

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at ScrollView (src/screens/ResultScreen.tsx:283:8)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:12679:20)
      at renderWithHooks (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:3622:25)
      at updateFunctionComponent (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:5635:19)
      at beginWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:7086:18)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:540:16)
      at performUnitOfWork (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10925:22)
      at workLoopSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10763:41)
      at renderRootSync (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10744:11)
      at performWorkOnRoot (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10299:39)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1879:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:31:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (src/screens/__tests__/ResultScreen.test.tsx:456:35)

FAIL src/components/__tests__/ScanningOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      4 | // Mock react-native-reanimated
      5 | jest.mock('react-native-reanimated', () => {
    > 6 |   const Reanimated = require('react-native-reanimated/mock');
        |                      ^
      7 |   Reanimated.default.call = () => {};
      8 |   return Reanimated;
      9 | });

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (src/components/__tests__/ScanningOverlay.test.tsx:6:22)
      at Object.require (src/components/ScanningOverlay.tsx:10:1)
      at Object.require (src/components/__tests__/ScanningOverlay.test.tsx:2:1)

FAIL src/__tests__/PerformanceBenchmarks.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (src/utils/FallbackController.ts:15:1)
      at Object.require (src/__tests__/PerformanceBenchmarks.test.ts:1:1)

FAIL __tests__/performance.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/performance.test.ts:36:1)

FAIL __tests__/ocr-parsing.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/ocr-parsing.test.ts:24:1)

FAIL __tests__/bridge.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/bridge.test.ts:32:1)

FAIL __tests__/integration.test.ts
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (__tests__/integration.test.ts:46:1)

FAIL src/__tests__/index.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/CameraScanner.tsx:19:1)
      at Object.require (src/index.tsx:26:1)
      at Object.require (src/__tests__/index.test.tsx:17:1)

FAIL src/components/__tests__/GuidanceOverlay.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/GuidanceOverlay.tsx:3:1)
      at Object.require (src/components/__tests__/GuidanceOverlay.test.tsx:3:1)

FAIL src/components/__tests__/QualityIndicator.enhanced.test.tsx
  ● Test suite failed to run

    TypeError: _NativePlatformConstantsIOS.default.getConstants is not a function

      54 | // Mock react-native-reanimated more comprehensively
      55 | jest.mock('react-native-reanimated', () => {
    > 56 |   const Reanimated = require('react-native-reanimated/mock');
         |                      ^
      57 |
      58 |   // Add any additional functions if needed
      59 |   return {

      at Object.getConstants [as constants] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:45:53)
      at Object.constants [as isDisableAnimations] (node_modules/react-native/Libraries/Utilities/Platform.ios.js:76:17)
      at Object.isDisableAnimations (node_modules/react-native/Libraries/Animated/AnimatedExports.js:23:58)
      at Object.require (node_modules/react-native/Libraries/Animated/Animated.js:16:36)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollViewStickyHeader.js:13:1)
      at Object.require (node_modules/react-native/Libraries/Components/ScrollView/ScrollView.js:50:1)
      at requireActual (node_modules/react-native/jest/mockComponent.js:14:12)
      at mockComponent (node_modules/react-native/jest/setup.js:209:27)
      at Object.require [as ScrollView] (node_modules/react-native/index.js:98:12)
      at Object.ScrollView (node_modules/react-native-reanimated/src/component/ScrollView.tsx:25:61)
      at Object.require (node_modules/react-native-reanimated/src/Animated.ts:22:1)
      at Object.require (node_modules/react-native-reanimated/src/index.ts:5:1)
      at Object.require (node_modules/react-native-reanimated/src/mock.ts:21:1)
      at Object.<anonymous> (node_modules/react-native-reanimated/mock.js:1:41)
      at require (jest.setup.js:56:22)
      at Object.require (src/components/QualityIndicator.tsx:6:1)
      at Object.require (src/components/__tests__/QualityIndicator.enhanced.test.tsx:3:1)

FAIL src/__tests__/PerformanceRegression.test.ts (5.18 s)
  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for barcode scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      138 |
      139 |       // Ensure we have results
    > 140 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      141 |
      142 |       // Calculate performance statistics
      143 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:140:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for OCR scanning performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      225 |
      226 |       // Ensure we have results
    > 227 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      228 |
      229 |       // Calculate performance statistics
      230 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:227:30)

  ● Performance Regression Tests › Baseline Performance Validation › should establish baseline for fallback processing performance

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      283 |
      284 |       // Ensure we have results
    > 285 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      286 |
      287 |       // Calculate performance statistics
      288 |       const timings = results

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:285:30)

  ● Performance Regression Tests › Regression Detection › should detect timing performance regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      332 |
      333 |       // Ensure we have results
    > 334 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      335 |
      336 |       // Calculate p95 timing
      337 |       const sortedTimes = results.filter((t) => t > 0).sort((a, b) => a - b);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:334:30)

  ● Performance Regression Tests › Regression Detection › should detect memory usage regression

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      393 |
      394 |       // Ensure we have memory data
    > 395 |       expect(memoryDeltas.length).toBeGreaterThan(0);
          |                                   ^
      396 |
      397 |       // Calculate memory usage statistics
      398 |       const validMemoryDeltas = memoryDeltas.filter((d) => !isNaN(d) && d >= 0);

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:395:35)

  ● Performance Regression Tests › Regression Detection › should track performance trends over time

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      520 |
      521 |       // Analyze trend across runs
    > 522 |       expect(benchmarkRuns.length).toBeGreaterThan(0);
          |                                    ^
      523 |
      524 |       if (benchmarkRuns.length >= 2) {
      525 |         const firstRun = benchmarkRuns[0];

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:522:36)

  ● Performance Regression Tests › Performance Stability › should maintain consistent performance under load

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      566 |
      567 |       // Ensure we have valid results
    > 568 |       expect(results.length).toBeGreaterThan(0);
          |                              ^
      569 |       const validResults = results.filter((r) => r > 0 && !isNaN(r));
      570 |       expect(validResults.length).toBeGreaterThan(0);
      571 |

      at Object.toBeGreaterThan (src/__tests__/PerformanceRegression.test.ts:568:30)

FAIL src/utils/__tests__/FallbackController.test.ts (6.818 s)
  ● FallbackController › Barcode scanning › should fail gracefully when barcode scanning fails in barcode mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan returned no data"

          343 |           // Ensure we have a valid result
          344 |           if (!result) {
        > 345 |             throw new ScanError({
              |                   ^
          346 |               code: 'BARCODE_SCAN_ERROR',
          347 |               message: 'Barcode scan returned no data',
          348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.scan (src/utils/FallbackController.ts:136:18)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:175:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:177:17)

  ● FallbackController › OCR scanning › should fail gracefully when OCR scanning fails

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      200 |       mockParseOCRText.mockRejectedValueOnce(ocrError);
      201 |
    > 202 |       await expect(controller.scan(mockOCRData, 'ocr')).rejects.toThrow(
          |             ^
      203 |         'OCR parsing failed'
      204 |       );
      205 |     });

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.expect (src/utils/__tests__/FallbackController.test.ts:202:13)

  ● FallbackController › Automatic fallback › should fallback to OCR when barcode scanning fails

    ScanError: Barcode scan returned no data

      343 |           // Ensure we have a valid result
      344 |           if (!result) {
    > 345 |             throw new ScanError({
          |                   ^
      346 |               code: 'BARCODE_SCAN_ERROR',
      347 |               message: 'Barcode scan returned no data',
      348 |               userMessage: 'Unable to scan barcode. Please try again.',

      at src/utils/FallbackController.ts:345:19
      at FallbackController.optimizedRetry (src/utils/FallbackController.ts:510:16)
      at FallbackController.performBarcodeScan (src/utils/FallbackController.ts:321:14)
      at FallbackController.performBarcodeScanWithFallback (src/utils/FallbackController.ts:204:22)
      at FallbackController.scan (src/utils/FallbackController.ts:146:22)
      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:220:22)

  ● FallbackController › Automatic fallback › should not fallback when not in auto mode

    expect(received).rejects.toThrow(expected)

    Expected substring: "Invalid barcode format"
    Received message:   "Barcode scan timeout"

          237 |             setTimeout(() => {
          238 |               reject(
        > 239 |                 new ScanError({
              |                 ^
          240 |                   code: 'TIMEOUT_ERROR',
          241 |                   message: 'Barcode scan timeout',
          242 |                   userMessage: 'Barcode scan took too long',

      at Timeout._onTimeout (src/utils/__tests__/FallbackController.test.ts:239:17)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.toThrow (src/utils/__tests__/FallbackController.test.ts:273:17)

  ● FallbackController › Progress tracking › should emit progress updates during scanning

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttempts": 1, "mode": "barcode", "state": "barcode"}
    Received
           1: {"barcodeAttempts": 0, "message": "Scanning barcode...", "mode": "barcode", "startTime": 1750870105552, "state": "barcode", "timeElapsed": 0}
           2: {"barcodeAttempts": 1, "message": "Scan completed successfully", "mode": "barcode", "startTime": 1750870105552, "state": "completed", "timeElapsed": 1}

    Number of calls: 2

      310 |       await controller.scan('test-barcode', 'barcode');
      311 |
    > 312 |       expect(events.onProgressUpdate).toHaveBeenCalledWith(
          |                                       ^
      313 |         expect.objectContaining({
      314 |           state: 'barcode',
      315 |           mode: 'barcode',

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:312:39)

  ● FallbackController › Progress tracking › should emit metrics updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"barcodeAttemptTime": Any<Number>, "finalMode": "barcode", "totalProcessingTime": Any<Number>}
    Received
           1: {"finalMode": "barcode", "success": true, "totalProcessingTime": 0}
           2: {"bottlenecks": [], "detailedPerformance": {"averageCpuUtilization": undefined, "averageGpuUtilization": undefined, "finalMemoryUsageMB": 143.10629367110994, "frameProcessingRate": undefined, "framesDropped": 0, "framesProcessed": 0, "initialMemoryUsageMB": 129.87472085523098, "meetsCpuTarget": true, "meetsFallbackTarget": true, "meetsMemoryTarget": true, "meetsOcrTarget": true, "memoryAllocations": 0, "memoryDeallocations": 0, "memoryDeltaMB": 13.231572815878963, "peakCpuUtilization": undefined, "peakGpuUtilization": undefined, "peakMemoryUsageMB": 143.10629367110994, "totalProcessingTime": 0}, "modeTransitionTime": undefined, "ocrProcessingTime": undefined, "peakMemoryUsageMB": 143.10629367110994, "performanceAlerts": [], "performanceRating": "excellent", "recommendations": [], "totalProcessingTime": 0}

    Number of calls: 2

      324 |       await controller.scan('test-barcode', 'barcode');
      325 |
    > 326 |       expect(events.onMetricsUpdate).toHaveBeenCalledWith(
          |                                      ^
      327 |         expect.objectContaining({
      328 |           finalMode: 'barcode',
      329 |           barcodeAttemptTime: expect.any(Number),

      at Object.toHaveBeenCalledWith (src/utils/__tests__/FallbackController.test.ts:326:38)

  ● FallbackController › Error handling › should wrap unknown errors in ScanError

    expect(received).toBe(expected) // Object.is equality

    Expected: "BARCODE_SCAN_ERROR"
    Received: "INVALID_BARCODE_FORMAT"

      383 |       } catch (error) {
      384 |         expect(error).toBeInstanceOf(ScanError);
    > 385 |         expect((error as ScanError).code).toBe('BARCODE_SCAN_ERROR');
          |                                           ^
      386 |         expect((error as ScanError).message).toBe('Barcode scanning failed');
      387 |       }
      388 |     });

      at Object.toBe (src/utils/__tests__/FallbackController.test.ts:385:43)

  ● FallbackController › Performance requirements › should complete fallback process within 4 seconds

    ScanError: Invalid barcode format

      391 |   describe('Performance requirements', () => {
      392 |     test('should complete fallback process within 4 seconds', async () => {
    > 393 |       const barcodeError = new ScanError({
          |                            ^
      394 |         code: 'INVALID_BARCODE_FORMAT',
      395 |         message: 'Invalid barcode format',
      396 |         userMessage: 'Unable to read barcode',

      at Object.<anonymous> (src/utils/__tests__/FallbackController.test.ts:393:28)


Test Suites: 25 failed, 9 passed, 34 total
Tests:       150 failed, 1 skipped, 226 passed, 377 total
Snapshots:   0 total
Time:        13.33 s
Ran all test suites.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
